 schemaname |      tablename      |                 indexname                 |                                                                                                          indexdef                                                                                                           | tablespace 
------------+---------------------+-------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------
 public     | ai_matches          | ai_matches_pkey                           | CREATE UNIQUE INDEX ai_matches_pkey ON public.ai_matches USING btree (id)                                                                                                                                                   | 
 public     | ai_matches          | idx_ai_matches_letter_id                  | CREATE INDEX idx_ai_matches_letter_id ON public.ai_matches USING btree (letter_id)                                                                                                                                          | 
 public     | ai_matches          | idx_ai_matches_matched_user_id            | CREATE INDEX idx_ai_matches_matched_user_id ON public.ai_matches USING btree (matched_user_id)                                                                                                                              | 
 public     | ai_replies          | ai_replies_pkey                           | CREATE UNIQUE INDEX ai_replies_pkey ON public.ai_replies USING btree (id)                                                                                                                                                   | 
 public     | ai_replies          | idx_ai_replies_original_letter_id         | CREATE INDEX idx_ai_replies_original_letter_id ON public.ai_replies USING btree (original_letter_id)                                                                                                                        | 
 public     | ai_replies          | idx_ai_replies_reply_letter_id            | CREATE INDEX idx_ai_replies_reply_letter_id ON public.ai_replies USING btree (reply_letter_id)                                                                                                                              | 
 public     | comments            | comments_pkey                             | CREATE UNIQUE INDEX comments_pkey ON public.comments USING btree (id)                                                                                                                                                       | 
 public     | comments            | idx_comments_deleted_at                   | CREATE INDEX idx_comments_deleted_at ON public.comments USING btree (deleted_at)                                                                                                                                            | 
 public     | comments            | idx_comments_letter_id                    | CREATE INDEX idx_comments_letter_id ON public.comments USING btree (letter_id)                                                                                                                                              | 
 public     | comments            | idx_comments_parent_id                    | CREATE INDEX idx_comments_parent_id ON public.comments USING btree (parent_id)                                                                                                                                              | 
 public     | comments            | idx_comments_user_id                      | CREATE INDEX idx_comments_user_id ON public.comments USING btree (user_id)                                                                                                                                                  | 
 public     | courier_tasks       | courier_tasks_pkey                        | CREATE UNIQUE INDEX courier_tasks_pkey ON public.courier_tasks USING btree (id)                                                                                                                                             | 
 public     | courier_tasks       | idx_courier_tasks_courier_id              | CREATE INDEX idx_courier_tasks_courier_id ON public.courier_tasks USING btree (courier_id)                                                                                                                                  | 
 public     | courier_tasks       | idx_courier_tasks_courier_status_priority | CREATE INDEX idx_courier_tasks_courier_status_priority ON public.courier_tasks USING btree (courier_id, status, priority, created_at DESC)                                                                                  | 
 public     | courier_tasks       | idx_courier_tasks_current_op_code         | CREATE INDEX idx_courier_tasks_current_op_code ON public.courier_tasks USING btree (current_op_code)                                                                                                                        | 
 public     | courier_tasks       | idx_courier_tasks_current_opcode_status   | CREATE INDEX idx_courier_tasks_current_opcode_status ON public.courier_tasks USING btree (current_op_code, status) WHERE ((current_op_code)::text <> ''::text)                                                              | 
 public     | courier_tasks       | idx_courier_tasks_deadline_status         | CREATE INDEX idx_courier_tasks_deadline_status ON public.courier_tasks USING btree (deadline, status) WHERE (deadline IS NOT NULL)                                                                                          | 
 public     | courier_tasks       | idx_courier_tasks_delivery_op             | CREATE INDEX idx_courier_tasks_delivery_op ON public.courier_tasks USING btree (delivery_op_code)                                                                                                                           | 
 public     | courier_tasks       | idx_courier_tasks_delivery_op_code        | CREATE INDEX idx_courier_tasks_delivery_op_code ON public.courier_tasks USING btree (delivery_op_code)                                                                                                                      | 
 public     | courier_tasks       | idx_courier_tasks_geo_routing             | CREATE INDEX idx_courier_tasks_geo_routing ON public.courier_tasks USING btree (pickup_op_code, delivery_op_code, status, priority) WHERE (((pickup_op_code)::text <> ''::text) AND ((delivery_op_code)::text <> ''::text)) | 
 public     | courier_tasks       | idx_courier_tasks_letter_code             | CREATE INDEX idx_courier_tasks_letter_code ON public.courier_tasks USING btree (letter_code)                                                                                                                                | 
 public     | courier_tasks       | idx_courier_tasks_pickup_delivery_opcode  | CREATE INDEX idx_courier_tasks_pickup_delivery_opcode ON public.courier_tasks USING btree (pickup_op_code, delivery_op_code) WHERE (((pickup_op_code)::text <> ''::text) AND ((delivery_op_code)::text <> ''::text))        | 
 public     | courier_tasks       | idx_courier_tasks_pickup_op               | CREATE INDEX idx_courier_tasks_pickup_op ON public.courier_tasks USING btree (pickup_op_code)                                                                                                                               | 
 public     | courier_tasks       | idx_courier_tasks_pickup_op_code          | CREATE INDEX idx_courier_tasks_pickup_op_code ON public.courier_tasks USING btree (pickup_op_code)                                                                                                                          | 
 public     | couriers            | couriers_pkey                             | CREATE UNIQUE INDEX couriers_pkey ON public.couriers USING btree (id)                                                                                                                                                       | 
 public     | couriers            | idx_couriers_active_hierarchy             | CREATE INDEX idx_couriers_active_hierarchy ON public.couriers USING btree (parent_id, level, created_at DESC) WHERE (((status)::text = 'approved'::text) AND (deleted_at IS NULL))                                          | 
 public     | couriers            | idx_couriers_created_by_id                | CREATE INDEX idx_couriers_created_by_id ON public.couriers USING btree (created_by_id)                                                                                                                                      | 
 public     | couriers            | idx_couriers_created_by_time              | CREATE INDEX idx_couriers_created_by_time ON public.couriers USING btree (created_by_id, created_at DESC) WHERE (created_by_id IS NOT NULL)                                                                                 | 
 public     | couriers            | idx_couriers_deleted_at                   | CREATE INDEX idx_couriers_deleted_at ON public.couriers USING btree (deleted_at)                                                                                                                                            | 
 public     | couriers            | idx_couriers_level_zone_active            | CREATE INDEX idx_couriers_level_zone_active ON public.couriers USING btree (level, zone_code, deleted_at) WHERE (deleted_at IS NULL)                                                                                        | 
 public     | couriers            | idx_couriers_managed_op_code_prefix       | CREATE INDEX idx_couriers_managed_op_code_prefix ON public.couriers USING btree (managed_op_code_prefix)                                                                                                                    | 
 public     | couriers            | idx_couriers_managed_prefix               | CREATE INDEX idx_couriers_managed_prefix ON public.couriers USING btree (managed_op_code_prefix)                                                                                                                            | 
 public     | couriers            | idx_couriers_managed_prefix_level         | CREATE INDEX idx_couriers_managed_prefix_level ON public.couriers USING btree (managed_op_code_prefix, level) WHERE ((managed_op_code_prefix)::text <> ''::text)                                                            | 
 public     | couriers            | idx_couriers_parent_id                    | CREATE INDEX idx_couriers_parent_id ON public.couriers USING btree (parent_id)                                                                                                                                              | 
 public     | couriers            | idx_couriers_parent_level                 | CREATE INDEX idx_couriers_parent_level ON public.couriers USING btree (parent_id, level) WHERE (parent_id IS NOT NULL)                                                                                                      | 
 public     | couriers            | idx_couriers_status_level                 | CREATE INDEX idx_couriers_status_level ON public.couriers USING btree (status, level, deleted_at) WHERE (deleted_at IS NULL)                                                                                                | 
 public     | couriers            | idx_couriers_user_id                      | CREATE INDEX idx_couriers_user_id ON public.couriers USING btree (user_id)                                                                                                                                                  | 
 public     | couriers            | idx_couriers_zone_code                    | CREATE INDEX idx_couriers_zone_code ON public.couriers USING btree (zone_code)                                                                                                                                              | 
 public     | credit_transactions | credit_transactions_pkey                  | CREATE UNIQUE INDEX credit_transactions_pkey ON public.credit_transactions USING btree (id)                                                                                                                                 | 
 public     | credit_transactions | idx_credit_transactions_expired_at        | CREATE INDEX idx_credit_transactions_expired_at ON public.credit_transactions USING btree (expired_at) WHERE (expired_at IS NOT NULL)                                                                                       | 
 public     | credit_transactions | idx_credit_transactions_expires_at        | CREATE INDEX idx_credit_transactions_expires_at ON public.credit_transactions USING btree (expires_at)                                                                                                                      | 
 public     | credit_transactions | idx_credit_transactions_is_expired        | CREATE INDEX idx_credit_transactions_is_expired ON public.credit_transactions USING btree (is_expired)                                                                                                                      | 
 public     | credit_transactions | idx_credit_transactions_user_id           | CREATE INDEX idx_credit_transactions_user_id ON public.credit_transactions USING btree (user_id)                                                                                                                            | 
 public     | envelopes           | envelopes_pkey                            | CREATE UNIQUE INDEX envelopes_pkey ON public.envelopes USING btree (id)                                                                                                                                                     | 
 public     | envelopes           | idx_envelopes_letter_id                   | CREATE INDEX idx_envelopes_letter_id ON public.envelopes USING btree (letter_id)                                                                                                                                            | 
 public     | envelopes           | idx_envelopes_recipient_op_code           | CREATE INDEX idx_envelopes_recipient_op_code ON public.envelopes USING btree (recipient_op_code)                                                                                                                            | 
 public     | envelopes           | idx_envelopes_sender_op_code              | CREATE INDEX idx_envelopes_sender_op_code ON public.envelopes USING btree (sender_op_code)                                                                                                                                  | 
 public     | envelopes           | uni_envelopes_barcode_id                  | CREATE UNIQUE INDEX uni_envelopes_barcode_id ON public.envelopes USING btree (barcode_id)                                                                                                                                   | 
 public     | letter_codes        | idx_letter_codes_bound_delivered          | CREATE INDEX idx_letter_codes_bound_delivered ON public.letter_codes USING btree (bound_at, delivered_at) WHERE (bound_at IS NOT NULL)                                                                                      | 
 public     | letter_codes        | idx_letter_codes_code                     | CREATE UNIQUE INDEX idx_letter_codes_code ON public.letter_codes USING btree (code)                                                                                                                                         | 
 public     | letter_codes        | idx_letter_codes_envelope_id              | CREATE INDEX idx_letter_codes_envelope_id ON public.letter_codes USING btree (envelope_id)                                                                                                                                  | 
 public     | letter_codes        | idx_letter_codes_envelope_status          | CREATE INDEX idx_letter_codes_envelope_status ON public.letter_codes USING btree (envelope_id, status) WHERE ((envelope_id)::text <> ''::text)                                                                              | 
 public     | letter_codes        | idx_letter_codes_letter_id                | CREATE UNIQUE INDEX idx_letter_codes_letter_id ON public.letter_codes USING btree (letter_id)                                                                                                                               | 
 public     | letter_codes        | idx_letter_codes_recipient_code           | CREATE INDEX idx_letter_codes_recipient_code ON public.letter_codes USING btree (recipient_code)                                                                                                                            | 
 public     | letter_codes        | idx_letter_codes_recipient_code_status    | CREATE INDEX idx_letter_codes_recipient_code_status ON public.letter_codes USING btree (recipient_code, status) WHERE ((recipient_code)::text <> ''::text)                                                                  | 
 public     | letter_codes        | idx_letter_codes_scanned_by_time          | CREATE INDEX idx_letter_codes_scanned_by_time ON public.letter_codes USING btree (last_scanned_by, last_scanned_at DESC) WHERE ((last_scanned_by)::text <> ''::text)                                                        | 
 public     | letter_codes        | idx_letter_codes_status                   | CREATE INDEX idx_letter_codes_status ON public.letter_codes USING btree (status)                                                                                                                                            | 
 public     | letter_codes        | idx_letter_codes_status_updated           | CREATE INDEX idx_letter_codes_status_updated ON public.letter_codes USING btree (status, updated_at DESC)                                                                                                                   | 
 public     | letter_codes        | letter_codes_pkey                         | CREATE UNIQUE INDEX letter_codes_pkey ON public.letter_codes USING btree (id)                                                                                                                                               | 
 public     | letter_likes        | idx_letter_likes_letter_created           | CREATE INDEX idx_letter_likes_letter_created ON public.letter_likes USING btree (letter_id, created_at DESC)                                                                                                                | 
 public     | letter_likes        | idx_letter_likes_letter_id                | CREATE INDEX idx_letter_likes_letter_id ON public.letter_likes USING btree (letter_id)                                                                                                                                      | 
 public     | letter_likes        | idx_letter_likes_user_created             | CREATE INDEX idx_letter_likes_user_created ON public.letter_likes USING btree (user_id, created_at DESC)                                                                                                                    | 
 public     | letter_likes        | idx_letter_likes_user_id                  | CREATE INDEX idx_letter_likes_user_id ON public.letter_likes USING btree (user_id)                                                                                                                                          | 
 public     | letter_likes        | letter_likes_pkey                         | CREATE UNIQUE INDEX letter_likes_pkey ON public.letter_likes USING btree (id)                                                                                                                                               | 
 public     | letter_photos       | idx_letter_photos_letter_id               | CREATE INDEX idx_letter_photos_letter_id ON public.letter_photos USING btree (letter_id)                                                                                                                                    | 
 public     | letter_photos       | letter_photos_pkey                        | CREATE UNIQUE INDEX letter_photos_pkey ON public.letter_photos USING btree (id)                                                                                                                                             | 
 public     | letter_shares       | idx_letter_shares_letter_id               | CREATE INDEX idx_letter_shares_letter_id ON public.letter_shares USING btree (letter_id)                                                                                                                                    | 
 public     | letter_shares       | idx_letter_shares_platform_created        | CREATE INDEX idx_letter_shares_platform_created ON public.letter_shares USING btree (platform, created_at DESC)                                                                                                             | 
 public     | letter_shares       | idx_letter_shares_user_id                 | CREATE INDEX idx_letter_shares_user_id ON public.letter_shares USING btree (user_id)                                                                                                                                        | 
 public     | letter_shares       | letter_shares_pkey                        | CREATE UNIQUE INDEX letter_shares_pkey ON public.letter_shares USING btree (id)                                                                                                                                             | 
 public     | letters             | idx_letters_active_drafts                 | CREATE INDEX idx_letters_active_drafts ON public.letters USING btree (user_id, updated_at DESC) WHERE (((status)::text = 'draft'::text) AND (deleted_at IS NULL))                                                           | 
 public     | letters             | idx_letters_author_id                     | CREATE INDEX idx_letters_author_id ON public.letters USING btree (author_id)                                                                                                                                                | 
 public     | letters             | idx_letters_complex_search                | CREATE INDEX idx_letters_complex_search ON public.letters USING btree (user_id, status, visibility, created_at DESC) WHERE (deleted_at IS NULL)                                                                             | 
 public     | letters             | idx_letters_courier_id                    | CREATE INDEX idx_letters_courier_id ON public.letters USING btree (courier_id)                                                                                                                                              | 
 public     | letters             | idx_letters_deleted_at                    | CREATE INDEX idx_letters_deleted_at ON public.letters USING btree (deleted_at)                                                                                                                                              | 
 public     | letters             | idx_letters_envelope_id                   | CREATE INDEX idx_letters_envelope_id ON public.letters USING btree (envelope_id)                                                                                                                                            | 
 public     | letters             | idx_letters_in_transit                    | CREATE INDEX idx_letters_in_transit ON public.letters USING btree (recipient_op_code, updated_at DESC) WHERE ((status)::text = ANY ((ARRAY['collected'::character varying, 'in_transit'::character varying])::text[]))      | 
 public     | letters             | idx_letters_recipient_id                  | CREATE INDEX idx_letters_recipient_id ON public.letters USING btree (recipient_id)                                                                                                                                          | 
 public     | letters             | idx_letters_recipient_op_code             | CREATE INDEX idx_letters_recipient_op_code ON public.letters USING btree (recipient_op_code)                                                                                                                                | 
 public     | letters             | idx_letters_recipient_opcode_status       | CREATE INDEX idx_letters_recipient_opcode_status ON public.letters USING btree (recipient_op_code, status) WHERE ((recipient_op_code)::text <> ''::text)                                                                    | 
 public     | letters             | idx_letters_reply_to                      | CREATE INDEX idx_letters_reply_to ON public.letters USING btree (reply_to)                                                                                                                                                  | 
 public     | letters             | idx_letters_reply_to_created              | CREATE INDEX idx_letters_reply_to_created ON public.letters USING btree (reply_to, created_at DESC) WHERE ((reply_to)::text <> ''::text)                                                                                    | 
 public     | letters             | idx_letters_scheduled_at                  | CREATE INDEX idx_letters_scheduled_at ON public.letters USING btree (scheduled_at)                                                                                                                                          | 
 public     | letters             | idx_letters_sender_op_code                | CREATE INDEX idx_letters_sender_op_code ON public.letters USING btree (sender_op_code)                                                                                                                                      | 
 public     | letters             | idx_letters_sender_opcode_created         | CREATE INDEX idx_letters_sender_opcode_created ON public.letters USING btree (sender_op_code, created_at DESC) WHERE ((sender_op_code)::text <> ''::text)                                                                   | 
 public     | letters             | idx_letters_type_visibility_created       | CREATE INDEX idx_letters_type_visibility_created ON public.letters USING btree (type, visibility, created_at DESC)                                                                                                          | 
 public     | letters             | idx_letters_user_id                       | CREATE INDEX idx_letters_user_id ON public.letters USING btree (user_id)                                                                                                                                                    | 
 public     | letters             | idx_letters_user_status_created           | CREATE INDEX idx_letters_user_status_created ON public.letters USING btree (user_id, status, created_at DESC)                                                                                                               | 
 public     | letters             | letters_pkey                              | CREATE UNIQUE INDEX letters_pkey ON public.letters USING btree (id)                                                                                                                                                         | 
 public     | moderation_records  | idx_moderation_records_content_id         | CREATE INDEX idx_moderation_records_content_id ON public.moderation_records USING btree (content_id)                                                                                                                        | 
 public     | moderation_records  | idx_moderation_records_content_type       | CREATE INDEX idx_moderation_records_content_type ON public.moderation_records USING btree (content_type)                                                                                                                    | 
 public     | moderation_records  | idx_moderation_records_user_id            | CREATE INDEX idx_moderation_records_user_id ON public.moderation_records USING btree (user_id)                                                                                                                              | 
 public     | moderation_records  | moderation_records_pkey                   | CREATE UNIQUE INDEX moderation_records_pkey ON public.moderation_records USING btree (id)                                                                                                                                   | 
 public     | museum_collections  | museum_collections_pkey                   | CREATE UNIQUE INDEX museum_collections_pkey ON public.museum_collections USING btree (id)                                                                                                                                   | 
 public     | museum_items        | idx_museum_items_origin_op_code           | CREATE INDEX idx_museum_items_origin_op_code ON public.museum_items USING btree (origin_op_code)                                                                                                                            | 
 public     | museum_items        | museum_items_pkey                         | CREATE UNIQUE INDEX museum_items_pkey ON public.museum_items USING btree (id)                                                                                                                                               | 
 public     | notifications       | idx_notifications_user_id                 | CREATE INDEX idx_notifications_user_id ON public.notifications USING btree (user_id)                                                                                                                                        | 
 public     | notifications       | notifications_pkey                        | CREATE UNIQUE INDEX notifications_pkey ON public.notifications USING btree (id)                                                                                                                                             | 
 public     | status_logs         | idx_status_logs_letter_id                 | CREATE INDEX idx_status_logs_letter_id ON public.status_logs USING btree (letter_id)                                                                                                                                        | 
 public     | status_logs         | idx_status_logs_letter_status_created     | CREATE INDEX idx_status_logs_letter_status_created ON public.status_logs USING btree (letter_id, status, created_at DESC)                                                                                                   | 
 public     | status_logs         | idx_status_logs_updated_by_created        | CREATE INDEX idx_status_logs_updated_by_created ON public.status_logs USING btree (updated_by, created_at DESC) WHERE ((updated_by)::text <> ''::text)                                                                      | 
 public     | status_logs         | status_logs_pkey                          | CREATE UNIQUE INDEX status_logs_pkey ON public.status_logs USING btree (id)                                                                                                                                                 | 
 public     | user_credits        | idx_user_credits_user_id                  | CREATE UNIQUE INDEX idx_user_credits_user_id ON public.user_credits USING btree (user_id)                                                                                                                                   | 
 public     | user_credits        | user_credits_pkey                         | CREATE UNIQUE INDEX user_credits_pkey ON public.user_credits USING btree (id)                                                                                                                                               | 
 public     | user_profiles       | user_profiles_pkey                        | CREATE UNIQUE INDEX user_profiles_pkey ON public.user_profiles USING btree (user_id)                                                                                                                                        | 
 public     | users               | idx_users_created_role                    | CREATE INDEX idx_users_created_role ON public.users USING btree (created_at DESC, role) WHERE (deleted_at IS NULL)                                                                                                          | 
 public     | users               | idx_users_deleted_at                      | CREATE INDEX idx_users_deleted_at ON public.users USING btree (deleted_at)                                                                                                                                                  | 
 public     | users               | idx_users_email                           | CREATE UNIQUE INDEX idx_users_email ON public.users USING btree (email)                                                                                                                                                     | 
 public     | users               | idx_users_op_code                         | CREATE INDEX idx_users_op_code ON public.users USING btree (op_code)                                                                                                                                                        | 
 public     | users               | idx_users_role_school_active              | CREATE INDEX idx_users_role_school_active ON public.users USING btree (role, school_code, is_active) WHERE (is_active = true)                                                                                               | 
 public     | users               | idx_users_school_code                     | CREATE INDEX idx_users_school_code ON public.users USING btree (school_code)                                                                                                                                                | 
 public     | users               | idx_users_username                        | CREATE UNIQUE INDEX idx_users_username ON public.users USING btree (username)                                                                                                                                               | 
 public     | users               | users_pkey                                | CREATE UNIQUE INDEX users_pkey ON public.users USING btree (id)                                                                                                                                                             | 
(113 rows)

psql:scripts/analyze_indexes.sql:31: ERROR:  column "tablename" does not exist
LINE 3:     tablename,
            ^
           table_name           |                                 duplicate_indexes                                 |          column_names           
--------------------------------+-----------------------------------------------------------------------------------+---------------------------------
 batch_analytics                | {batch_analytics_batch_id_key,idx_batch_analytics_batch_id}                       | {batch_id}
 courier_tasks                  | {idx_courier_tasks_delivery_op,idx_courier_tasks_delivery_op_code}                | {delivery_op_code}
 courier_tasks                  | {idx_courier_tasks_pickup_op_code,idx_courier_tasks_pickup_op}                    | {pickup_op_code}
 couriers                       | {idx_couriers_managed_prefix,idx_couriers_managed_op_code_prefix}                 | {managed_op_code_prefix}
 credit_activity_participations | {idx_participations_unique_activity_user_time,idx_participations_activity_user}   | {activity_id,user_id}
 credit_redemptions             | {uni_credit_redemptions_redemption_no,idx_credit_redemptions_redemption_no}       | {redemption_no}
 credit_shop_products           | {idx_credit_shop_products_deleted,idx_credit_shop_products_deleted_at}            | {deleted_at}
 privacy_cache                  | {idx_privacy_cache_viewer_target,privacy_cache_viewer_user_id_target_user_id_key} | {viewer_user_id,target_user_id}
 privacy_settings               | {idx_privacy_settings_user_id,privacy_settings_user_id_key}                       | {user_id}
 schools                        | {schools_code_key,idx_schools_code}                                               | {code}
 user_profiles_extended         | {idx_user_profiles_extended_op_code,idx_user_profiles_extended_opcode}            | {op_code}
(11 rows)

 schemaname |            tablename             |                    indexname                    |                                                                                                          indexdef                                                                                                           
------------+----------------------------------+-------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 public     | batch_milestones                 | uk_batch_milestone                              | CREATE UNIQUE INDEX uk_batch_milestone ON public.batch_milestones USING btree (batch_id, milestone)
 public     | batch_permissions                | uk_batch_user_permission                        | CREATE UNIQUE INDEX uk_batch_user_permission ON public.batch_permissions USING btree (batch_id, user_id, permission_type)
 public     | courier_statistics               | idx_courier_date                                | CREATE UNIQUE INDEX idx_courier_date ON public.courier_statistics USING btree (courier_id, date)
 public     | courier_tasks                    | idx_courier_tasks_courier_status_priority       | CREATE INDEX idx_courier_tasks_courier_status_priority ON public.courier_tasks USING btree (courier_id, status, priority, created_at DESC)
 public     | courier_tasks                    | idx_courier_tasks_current_opcode_status         | CREATE INDEX idx_courier_tasks_current_opcode_status ON public.courier_tasks USING btree (current_op_code, status) WHERE ((current_op_code)::text <> ''::text)
 public     | courier_tasks                    | idx_courier_tasks_deadline_status               | CREATE INDEX idx_courier_tasks_deadline_status ON public.courier_tasks USING btree (deadline, status) WHERE (deadline IS NOT NULL)
 public     | courier_tasks                    | idx_courier_tasks_geo_routing                   | CREATE INDEX idx_courier_tasks_geo_routing ON public.courier_tasks USING btree (pickup_op_code, delivery_op_code, status, priority) WHERE (((pickup_op_code)::text <> ''::text) AND ((delivery_op_code)::text <> ''::text))
 public     | courier_tasks                    | idx_courier_tasks_pickup_delivery_opcode        | CREATE INDEX idx_courier_tasks_pickup_delivery_opcode ON public.courier_tasks USING btree (pickup_op_code, delivery_op_code) WHERE (((pickup_op_code)::text <> ''::text) AND ((delivery_op_code)::text <> ''::text))
 public     | couriers                         | idx_couriers_active_hierarchy                   | CREATE INDEX idx_couriers_active_hierarchy ON public.couriers USING btree (parent_id, level, created_at DESC) WHERE (((status)::text = 'approved'::text) AND (deleted_at IS NULL))
 public     | couriers                         | idx_couriers_created_by_time                    | CREATE INDEX idx_couriers_created_by_time ON public.couriers USING btree (created_by_id, created_at DESC) WHERE (created_by_id IS NOT NULL)
 public     | couriers                         | idx_couriers_level_zone_active                  | CREATE INDEX idx_couriers_level_zone_active ON public.couriers USING btree (level, zone_code, deleted_at) WHERE (deleted_at IS NULL)
 public     | couriers                         | idx_couriers_managed_prefix_level               | CREATE INDEX idx_couriers_managed_prefix_level ON public.couriers USING btree (managed_op_code_prefix, level) WHERE ((managed_op_code_prefix)::text <> ''::text)
 public     | couriers                         | idx_couriers_parent_level                       | CREATE INDEX idx_couriers_parent_level ON public.couriers USING btree (parent_id, level) WHERE (parent_id IS NOT NULL)
 public     | couriers                         | idx_couriers_status_level                       | CREATE INDEX idx_couriers_status_level ON public.couriers USING btree (status, level, deleted_at) WHERE (deleted_at IS NULL)
 public     | credit_activity_participations   | idx_participations_activity_user                | CREATE INDEX idx_participations_activity_user ON public.credit_activity_participations USING btree (activity_id, user_id)
 public     | credit_activity_participations   | idx_participations_unique_activity_user_time    | CREATE INDEX idx_participations_unique_activity_user_time ON public.credit_activity_participations USING btree (activity_id, user_id, date(participation_time))
 public     | credit_activity_rewards          | idx_rewards_activity_user                       | CREATE INDEX idx_rewards_activity_user ON public.credit_activity_rewards USING btree (activity_id, user_id)
 public     | credit_activity_target_audiences | uk_target_audiences                             | CREATE UNIQUE INDEX uk_target_audiences ON public.credit_activity_target_audiences USING btree (activity_id, target_type, target_value)
 public     | credit_limit_rules               | idx_credit_limit_rules_action_enabled           | CREATE INDEX idx_credit_limit_rules_action_enabled ON public.credit_limit_rules USING btree (action_type, enabled)
 public     | credit_limit_rules               | idx_credit_limit_rules_priority                 | CREATE INDEX idx_credit_limit_rules_priority ON public.credit_limit_rules USING btree (priority, enabled)
 public     | credit_redemptions               | idx_credit_redemptions_user_status              | CREATE INDEX idx_credit_redemptions_user_status ON public.credit_redemptions USING btree (user_id, status)
 public     | credit_risk_users                | idx_credit_risk_users_level_score               | CREATE INDEX idx_credit_risk_users_level_score ON public.credit_risk_users USING btree (risk_level, risk_score)
 public     | credit_shop_categories           | idx_credit_shop_categories_active_sort          | CREATE INDEX idx_credit_shop_categories_active_sort ON public.credit_shop_categories USING btree (is_active, sort_order)
 public     | credit_shop_products             | idx_credit_shop_products_priority               | CREATE INDEX idx_credit_shop_products_priority ON public.credit_shop_products USING btree (priority DESC, created_at DESC)
 public     | credit_shop_products             | idx_credit_shop_products_valid_period           | CREATE INDEX idx_credit_shop_products_valid_period ON public.credit_shop_products USING btree (valid_from, valid_to)
 public     | credit_transfer_limits           | uk_transfer_limit_user_type                     | CREATE UNIQUE INDEX uk_transfer_limit_user_type ON public.credit_transfer_limits USING btree (user_id, limit_type)
 public     | fraud_detection_logs             | idx_fraud_detection_logs_user_time              | CREATE INDEX idx_fraud_detection_logs_user_time ON public.fraud_detection_logs USING btree (user_id, created_at)
 public     | letter_codes                     | idx_letter_codes_bound_delivered                | CREATE INDEX idx_letter_codes_bound_delivered ON public.letter_codes USING btree (bound_at, delivered_at) WHERE (bound_at IS NOT NULL)
 public     | letter_codes                     | idx_letter_codes_envelope_status                | CREATE INDEX idx_letter_codes_envelope_status ON public.letter_codes USING btree (envelope_id, status) WHERE ((envelope_id)::text <> ''::text)
 public     | letter_codes                     | idx_letter_codes_recipient_code_status          | CREATE INDEX idx_letter_codes_recipient_code_status ON public.letter_codes USING btree (recipient_code, status) WHERE ((recipient_code)::text <> ''::text)
 public     | letter_codes                     | idx_letter_codes_scanned_by_time                | CREATE INDEX idx_letter_codes_scanned_by_time ON public.letter_codes USING btree (last_scanned_by, last_scanned_at DESC) WHERE ((last_scanned_by)::text <> ''::text)
 public     | letter_codes                     | idx_letter_codes_status_updated                 | CREATE INDEX idx_letter_codes_status_updated ON public.letter_codes USING btree (status, updated_at DESC)
 public     | letter_likes                     | idx_letter_likes_letter_created                 | CREATE INDEX idx_letter_likes_letter_created ON public.letter_likes USING btree (letter_id, created_at DESC)
 public     | letter_likes                     | idx_letter_likes_user_created                   | CREATE INDEX idx_letter_likes_user_created ON public.letter_likes USING btree (user_id, created_at DESC)
 public     | letter_shares                    | idx_letter_shares_platform_created              | CREATE INDEX idx_letter_shares_platform_created ON public.letter_shares USING btree (platform, created_at DESC)
 public     | letters                          | idx_letters_active_drafts                       | CREATE INDEX idx_letters_active_drafts ON public.letters USING btree (user_id, updated_at DESC) WHERE (((status)::text = 'draft'::text) AND (deleted_at IS NULL))
 public     | letters                          | idx_letters_complex_search                      | CREATE INDEX idx_letters_complex_search ON public.letters USING btree (user_id, status, visibility, created_at DESC) WHERE (deleted_at IS NULL)
 public     | letters                          | idx_letters_in_transit                          | CREATE INDEX idx_letters_in_transit ON public.letters USING btree (recipient_op_code, updated_at DESC) WHERE ((status)::text = ANY ((ARRAY['collected'::character varying, 'in_transit'::character varying])::text[]))
 public     | letters                          | idx_letters_recipient_opcode_status             | CREATE INDEX idx_letters_recipient_opcode_status ON public.letters USING btree (recipient_op_code, status) WHERE ((recipient_op_code)::text <> ''::text)
 public     | letters                          | idx_letters_reply_to_created                    | CREATE INDEX idx_letters_reply_to_created ON public.letters USING btree (reply_to, created_at DESC) WHERE ((reply_to)::text <> ''::text)
 public     | letters                          | idx_letters_sender_opcode_created               | CREATE INDEX idx_letters_sender_opcode_created ON public.letters USING btree (sender_op_code, created_at DESC) WHERE ((sender_op_code)::text <> ''::text)
 public     | letters                          | idx_letters_type_visibility_created             | CREATE INDEX idx_letters_type_visibility_created ON public.letters USING btree (type, visibility, created_at DESC)
 public     | letters                          | idx_letters_user_status_created                 | CREATE INDEX idx_letters_user_status_created ON public.letters USING btree (user_id, status, created_at DESC)
 public     | level_upgrade_requests           | idx_level_upgrade_requests_courier_status       | CREATE INDEX idx_level_upgrade_requests_courier_status ON public.level_upgrade_requests USING btree (courier_id, status, created_at DESC)
 public     | level_upgrade_requests           | idx_level_upgrade_requests_level_transition     | CREATE INDEX idx_level_upgrade_requests_level_transition ON public.level_upgrade_requests USING btree (current_level, request_level, status)
 public     | level_upgrade_requests           | idx_level_upgrade_requests_reviewer_reviewed    | CREATE INDEX idx_level_upgrade_requests_reviewer_reviewed ON public.level_upgrade_requests USING btree (reviewed_by, reviewed_at DESC) WHERE ((reviewed_by)::text <> ''::text)
 public     | mv_barcode_status_flow           | idx_mv_barcode_status_flow_transition           | CREATE INDEX idx_mv_barcode_status_flow_transition ON public.mv_barcode_status_flow USING btree (old_status, new_status)
 public     | mv_courier_performance           | idx_mv_courier_performance_level                | CREATE INDEX idx_mv_courier_performance_level ON public.mv_courier_performance USING btree (level, completed_tasks DESC)
 public     | op_code_areas                    | idx_op_code_areas_school_code_active            | CREATE INDEX idx_op_code_areas_school_code_active ON public.op_code_areas USING btree (school_code, area_code, is_active)
 public     | op_code_areas                    | op_code_areas_school_code_area_code_key         | CREATE UNIQUE INDEX op_code_areas_school_code_area_code_key ON public.op_code_areas USING btree (school_code, area_code)
 public     | op_code_schools                  | idx_op_code_schools_code_active                 | CREATE INDEX idx_op_code_schools_code_active ON public.op_code_schools USING btree (school_code, is_active)
 public     | privacy_cache                    | idx_privacy_cache_viewer_target                 | CREATE INDEX idx_privacy_cache_viewer_target ON public.privacy_cache USING btree (viewer_user_id, target_user_id)
 public     | privacy_cache                    | privacy_cache_viewer_user_id_target_user_id_key | CREATE UNIQUE INDEX privacy_cache_viewer_user_id_target_user_id_key ON public.privacy_cache USING btree (viewer_user_id, target_user_id)
 public     | scan_events                      | idx_scan_events_barcode_timestamp               | CREATE INDEX idx_scan_events_barcode_timestamp ON public.scan_events USING btree (barcode_id, "timestamp" DESC)
 public     | scan_events                      | idx_scan_events_lettercode_timestamp            | CREATE INDEX idx_scan_events_lettercode_timestamp ON public.scan_events USING btree (letter_code_id, "timestamp" DESC)
 public     | scan_events                      | idx_scan_events_location_time                   | CREATE INDEX idx_scan_events_location_time ON public.scan_events USING btree (location, "timestamp" DESC) WHERE ((location)::text <> ''::text)
 public     | scan_events                      | idx_scan_events_opcode_type_time                | CREATE INDEX idx_scan_events_opcode_type_time ON public.scan_events USING btree (op_code, scan_type, "timestamp" DESC) WHERE ((op_code)::text <> ''::text)
 public     | scan_events                      | idx_scan_events_scanner_type_time               | CREATE INDEX idx_scan_events_scanner_type_time ON public.scan_events USING btree (scanned_by, scan_type, "timestamp" DESC)
 public     | scan_events                      | idx_scan_events_status_transition               | CREATE INDEX idx_scan_events_status_transition ON public.scan_events USING btree (old_status, new_status, "timestamp" DESC)
 public     | scan_records                     | idx_scan_records_courier_timestamp              | CREATE INDEX idx_scan_records_courier_timestamp ON public.scan_records USING btree (courier_id, "timestamp" DESC)
 public     | school_admins                    | school_admins_school_id_user_id_key             | CREATE UNIQUE INDEX school_admins_school_id_user_id_key ON public.school_admins USING btree (school_id, user_id)
 public     | school_departments               | school_departments_school_id_code_key           | CREATE UNIQUE INDEX school_departments_school_id_code_key ON public.school_departments USING btree (school_id, code)
 public     | school_settings                  | school_settings_school_id_setting_key_key       | CREATE UNIQUE INDEX school_settings_school_id_setting_key_key ON public.school_settings USING btree (school_id, setting_key)
 public     | schools                          | idx_schools_active_province                     | CREATE INDEX idx_schools_active_province ON public.schools USING btree (status, province) WHERE ((status)::text = 'active'::text)
 public     | schools                          | idx_schools_name_search                         | CREATE INDEX idx_schools_name_search ON public.schools USING gin (to_tsvector('simple'::regconfig, (((((name)::text || ' '::text) || (full_name)::text) || ' '::text) || (english_name)::text)))
 public     | schools                          | idx_schools_province_city                       | CREATE INDEX idx_schools_province_city ON public.schools USING btree (province, city)
 public     | schools                          | idx_schools_type_level                          | CREATE INDEX idx_schools_type_level ON public.schools USING btree (school_type, school_level)
 public     | status_logs                      | idx_status_logs_letter_status_created           | CREATE INDEX idx_status_logs_letter_status_created ON public.status_logs USING btree (letter_id, status, created_at DESC)
 public     | status_logs                      | idx_status_logs_updated_by_created              | CREATE INDEX idx_status_logs_updated_by_created ON public.status_logs USING btree (updated_by, created_at DESC) WHERE ((updated_by)::text <> ''::text)
 public     | user_achievements                | idx_user_achievements_code_unlocked             | CREATE INDEX idx_user_achievements_code_unlocked ON public.user_achievements USING btree (code, unlocked_at DESC)
 public     | user_achievements                | idx_user_achievements_user_category             | CREATE INDEX idx_user_achievements_user_category ON public.user_achievements USING btree (user_id, category, unlocked_at DESC)
 public     | user_credit_actions              | idx_user_credit_actions_ip                      | CREATE INDEX idx_user_credit_actions_ip ON public.user_credit_actions USING btree (ip_address, created_at)
 public     | user_credit_actions              | idx_user_credit_actions_user_action_time        | CREATE INDEX idx_user_credit_actions_user_action_time ON public.user_credit_actions USING btree (user_id, action_type, created_at)
 public     | user_credit_actions              | idx_user_credit_actions_user_time               | CREATE INDEX idx_user_credit_actions_user_time ON public.user_credit_actions USING btree (user_id, created_at)
 public     | user_profiles_extended           | idx_user_profiles_extended_levels               | CREATE INDEX idx_user_profiles_extended_levels ON public.user_profiles_extended USING btree (writing_level, courier_level)
 public     | user_relationships               | unique_follow_relationship                      | CREATE UNIQUE INDEX unique_follow_relationship ON public.user_relationships USING btree (follower_id, following_id)
 public     | user_stats                       | idx_user_stats_points_streak                    | CREATE INDEX idx_user_stats_points_streak ON public.user_stats USING btree (total_points DESC, current_streak DESC)
 public     | user_suggestions                 | unique_user_suggestion                          | CREATE UNIQUE INDEX unique_user_suggestion ON public.user_suggestions USING btree (user_id, suggested_user_id)
 public     | users                            | idx_users_created_role                          | CREATE INDEX idx_users_created_role ON public.users USING btree (created_at DESC, role) WHERE (deleted_at IS NULL)
 public     | users                            | idx_users_role_school_active                    | CREATE INDEX idx_users_role_school_active ON public.users USING btree (role, school_code, is_active) WHERE (is_active = true)
(80 rows)

 schemaname |       tablename        |                  indexname                   |                                                                                                          indexdef                                                                                                           
------------+------------------------+----------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 public     | courier_tasks          | idx_courier_tasks_current_opcode_status      | CREATE INDEX idx_courier_tasks_current_opcode_status ON public.courier_tasks USING btree (current_op_code, status) WHERE ((current_op_code)::text <> ''::text)
 public     | courier_tasks          | idx_courier_tasks_deadline_status            | CREATE INDEX idx_courier_tasks_deadline_status ON public.courier_tasks USING btree (deadline, status) WHERE (deadline IS NOT NULL)
 public     | courier_tasks          | idx_courier_tasks_geo_routing                | CREATE INDEX idx_courier_tasks_geo_routing ON public.courier_tasks USING btree (pickup_op_code, delivery_op_code, status, priority) WHERE (((pickup_op_code)::text <> ''::text) AND ((delivery_op_code)::text <> ''::text))
 public     | courier_tasks          | idx_courier_tasks_pickup_delivery_opcode     | CREATE INDEX idx_courier_tasks_pickup_delivery_opcode ON public.courier_tasks USING btree (pickup_op_code, delivery_op_code) WHERE (((pickup_op_code)::text <> ''::text) AND ((delivery_op_code)::text <> ''::text))
 public     | couriers               | idx_couriers_active_hierarchy                | CREATE INDEX idx_couriers_active_hierarchy ON public.couriers USING btree (parent_id, level, created_at DESC) WHERE (((status)::text = 'approved'::text) AND (deleted_at IS NULL))
 public     | couriers               | idx_couriers_created_by_time                 | CREATE INDEX idx_couriers_created_by_time ON public.couriers USING btree (created_by_id, created_at DESC) WHERE (created_by_id IS NOT NULL)
 public     | couriers               | idx_couriers_level_zone_active               | CREATE INDEX idx_couriers_level_zone_active ON public.couriers USING btree (level, zone_code, deleted_at) WHERE (deleted_at IS NULL)
 public     | couriers               | idx_couriers_managed_prefix_level            | CREATE INDEX idx_couriers_managed_prefix_level ON public.couriers USING btree (managed_op_code_prefix, level) WHERE ((managed_op_code_prefix)::text <> ''::text)
 public     | couriers               | idx_couriers_parent_level                    | CREATE INDEX idx_couriers_parent_level ON public.couriers USING btree (parent_id, level) WHERE (parent_id IS NOT NULL)
 public     | couriers               | idx_couriers_status_level                    | CREATE INDEX idx_couriers_status_level ON public.couriers USING btree (status, level, deleted_at) WHERE (deleted_at IS NULL)
 public     | credit_risk_users      | idx_credit_risk_users_blocked                | CREATE INDEX idx_credit_risk_users_blocked ON public.credit_risk_users USING btree (blocked_until) WHERE (blocked_until IS NOT NULL)
 public     | credit_shop_products   | idx_credit_shop_products_deleted             | CREATE INDEX idx_credit_shop_products_deleted ON public.credit_shop_products USING btree (deleted_at) WHERE (deleted_at IS NOT NULL)
 public     | credit_shop_products   | idx_credit_shop_products_featured            | CREATE INDEX idx_credit_shop_products_featured ON public.credit_shop_products USING btree (is_featured) WHERE (is_featured = true)
 public     | credit_shop_products   | idx_credit_shop_products_stock               | CREATE INDEX idx_credit_shop_products_stock ON public.credit_shop_products USING btree (stock) WHERE (stock > 0)
 public     | credit_transactions    | idx_credit_transactions_expired_at           | CREATE INDEX idx_credit_transactions_expired_at ON public.credit_transactions USING btree (expired_at) WHERE (expired_at IS NOT NULL)
 public     | letter_codes           | idx_letter_codes_bound_delivered             | CREATE INDEX idx_letter_codes_bound_delivered ON public.letter_codes USING btree (bound_at, delivered_at) WHERE (bound_at IS NOT NULL)
 public     | letter_codes           | idx_letter_codes_envelope_status             | CREATE INDEX idx_letter_codes_envelope_status ON public.letter_codes USING btree (envelope_id, status) WHERE ((envelope_id)::text <> ''::text)
 public     | letter_codes           | idx_letter_codes_recipient_code_status       | CREATE INDEX idx_letter_codes_recipient_code_status ON public.letter_codes USING btree (recipient_code, status) WHERE ((recipient_code)::text <> ''::text)
 public     | letter_codes           | idx_letter_codes_scanned_by_time             | CREATE INDEX idx_letter_codes_scanned_by_time ON public.letter_codes USING btree (last_scanned_by, last_scanned_at DESC) WHERE ((last_scanned_by)::text <> ''::text)
 public     | letters                | idx_letters_active_drafts                    | CREATE INDEX idx_letters_active_drafts ON public.letters USING btree (user_id, updated_at DESC) WHERE (((status)::text = 'draft'::text) AND (deleted_at IS NULL))
 public     | letters                | idx_letters_complex_search                   | CREATE INDEX idx_letters_complex_search ON public.letters USING btree (user_id, status, visibility, created_at DESC) WHERE (deleted_at IS NULL)
 public     | letters                | idx_letters_in_transit                       | CREATE INDEX idx_letters_in_transit ON public.letters USING btree (recipient_op_code, updated_at DESC) WHERE ((status)::text = ANY ((ARRAY['collected'::character varying, 'in_transit'::character varying])::text[]))
 public     | letters                | idx_letters_recipient_opcode_status          | CREATE INDEX idx_letters_recipient_opcode_status ON public.letters USING btree (recipient_op_code, status) WHERE ((recipient_op_code)::text <> ''::text)
 public     | letters                | idx_letters_reply_to_created                 | CREATE INDEX idx_letters_reply_to_created ON public.letters USING btree (reply_to, created_at DESC) WHERE ((reply_to)::text <> ''::text)
 public     | letters                | idx_letters_sender_opcode_created            | CREATE INDEX idx_letters_sender_opcode_created ON public.letters USING btree (sender_op_code, created_at DESC) WHERE ((sender_op_code)::text <> ''::text)
 public     | level_upgrade_requests | idx_level_upgrade_requests_reviewer_reviewed | CREATE INDEX idx_level_upgrade_requests_reviewer_reviewed ON public.level_upgrade_requests USING btree (reviewed_by, reviewed_at DESC) WHERE ((reviewed_by)::text <> ''::text)
 public     | op_code_areas          | idx_op_code_areas_managed_by                 | CREATE INDEX idx_op_code_areas_managed_by ON public.op_code_areas USING btree (managed_by) WHERE ((managed_by)::text <> ''::text)
 public     | op_code_schools        | idx_op_code_schools_managed_by               | CREATE INDEX idx_op_code_schools_managed_by ON public.op_code_schools USING btree (managed_by) WHERE ((managed_by)::text <> ''::text)
 public     | scan_events            | idx_scan_events_location_time                | CREATE INDEX idx_scan_events_location_time ON public.scan_events USING btree (location, "timestamp" DESC) WHERE ((location)::text <> ''::text)
 public     | scan_events            | idx_scan_events_opcode_type_time             | CREATE INDEX idx_scan_events_opcode_type_time ON public.scan_events USING btree (op_code, scan_type, "timestamp" DESC) WHERE ((op_code)::text <> ''::text)
 public     | schools                | idx_schools_active_province                  | CREATE INDEX idx_schools_active_province ON public.schools USING btree (status, province) WHERE ((status)::text = 'active'::text)
 public     | status_logs            | idx_status_logs_updated_by_created           | CREATE INDEX idx_status_logs_updated_by_created ON public.status_logs USING btree (updated_by, created_at DESC) WHERE ((updated_by)::text <> ''::text)
 public     | user_profiles_extended | idx_user_profiles_extended_opcode            | CREATE INDEX idx_user_profiles_extended_opcode ON public.user_profiles_extended USING btree (op_code) WHERE ((op_code)::text <> ''::text)
 public     | user_stats             | idx_user_stats_active_date                   | CREATE INDEX idx_user_stats_active_date ON public.user_stats USING btree (last_active_date DESC) WHERE (last_active_date IS NOT NULL)
 public     | users                  | idx_users_created_role                       | CREATE INDEX idx_users_created_role ON public.users USING btree (created_at DESC, role) WHERE (deleted_at IS NULL)
 public     | users                  | idx_users_role_school_active                 | CREATE INDEX idx_users_role_school_active ON public.users USING btree (role, school_code, is_active) WHERE (is_active = true)
(36 rows)

psql:scripts/analyze_indexes.sql:92: ERROR:  column "tablename" does not exist
LINE 3:     tablename,
            ^
     table_name      |     column_name     | foreign_table_name | foreign_column_name |                                                suggested_index                                                
---------------------+---------------------+--------------------+---------------------+---------------------------------------------------------------------------------------------------------------
 envelope_orders     | design_id           | envelope_designs   | id                  | CREATE INDEX idx_envelope_orders_design_id ON public.envelope_orders (design_id);
 envelopes           | design_id           | envelope_designs   | id                  | CREATE INDEX idx_envelopes_design_id ON public.envelopes (design_id);
 museum_items        | approved_by         | users              | id                  | CREATE INDEX idx_museum_items_approved_by ON public.museum_items (approved_by);
 museum_items        | source_id           | letters            | id                  | CREATE INDEX idx_museum_items_source_id ON public.museum_items (source_id);
 museum_items        | submitted_by        | users              | id                  | CREATE INDEX idx_museum_items_submitted_by ON public.museum_items (submitted_by);
 museum_submissions  | letter_id           | letters            | id                  | CREATE INDEX idx_museum_submissions_letter_id ON public.museum_submissions (letter_id);
 privacy_cache       | target_user_id      | users              | id                  | CREATE INDEX idx_privacy_cache_target_user_id ON public.privacy_cache (target_user_id);
 privacy_cache       | viewer_user_id      | users              | id                  | CREATE INDEX idx_privacy_cache_viewer_user_id ON public.privacy_cache (viewer_user_id);
 school_admins       | department_id       | school_departments | id                  | CREATE INDEX idx_school_admins_department_id ON public.school_admins (department_id);
 school_applications | generated_school_id | schools            | id                  | CREATE INDEX idx_school_applications_generated_school_id ON public.school_applications (generated_school_id);
(10 rows)

psql:scripts/analyze_indexes.sql:132: ERROR:  column "tablename" does not exist
LINE 3:     tablename,
            ^
psql:scripts/analyze_indexes.sql:170: ERROR:  function round(double precision, integer) does not exist
LINE 31:         THEN round(100.0 * (relpages - (reltuples * 16 / 819...
                      ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
psql:scripts/analyze_indexes.sql:190: ERROR:  column "tablename" does not exist
LINE 3:     tablename,
            ^
