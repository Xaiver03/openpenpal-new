# OpenPenPal 测试规范标准

## 目录结构规范

```
test-kimi/
├── standards/          # 测试标准与规范
├── scripts/           # 测试脚本
├── reports/           # 测试报告
├── data/             # 测试数据
├── docs/             # 测试文档
└── temp/             # 临时文件
```

## 测试类型标准

### 1. 单元测试 (Unit Tests)
- **目标**: 验证单个函数/组件功能
- **命名**: `test_[module]_[function].js`
- **位置**: 各模块的 `__tests__/` 目录
- **覆盖率**: 要求 ≥80%

### 2. 集成测试 (Integration Tests)
- **目标**: 验证模块间交互
- **命名**: `integration_[feature].test.js`
- **位置**: `test-kimi/scripts/integration/`
- **覆盖率**: 关键业务流程100%覆盖

### 3. PRD符合度测试 (PRD Compliance)
- **目标**: 验证产品需求符合度
- **命名**: `prd_compliance_[feature].md`
- **位置**: `test-kimi/standards/`

### 4. 端到端测试 (E2E Tests)
- **目标**: 验证完整用户流程
- **命名**: `e2e_[scenario].test.js`
- **工具**: Playwright/Cypress

## 测试脚本规范

### 命名规范
- 测试脚本: `test_[功能]_[场景].sh`
- 测试报告: `[日期]_report_[类型].md`
- 数据文件: `data_[类型]_[日期].json`

### 执行标准
1. **前置检查**: 环境验证脚本
2. **测试执行**: 分模块测试
3. **结果验证**: 断言检查
4. **报告生成**: 自动生成报告

## 测试环境标准

### 开发环境
- 前端: `http://localhost:3000`
- 后端: `http://localhost:8080`
- 数据库: `localhost:5432`

### 测试环境
- 前端: `http://test.openpenpal.com`
- 后端: `http://api-test.openpenpal.com`
- 数据库: 独立测试数据库

## 测试数据规范

### 测试用户
- 管理员: `admin@test.com` / `Admin@123`
- 普通用户: `user@test.com` / `User@123`
- 测试用户: `test@test.com` / `Test@123`

### 测试数据
- 测试信件: 标准化测试内容
- 测试图片: 标准测试图片
- 测试文件: 标准测试文档

## 质量标准

### 通过标准
- 所有测试用例通过
- 代码覆盖率 ≥80%
- 性能指标达标
- 安全扫描通过

### 失败处理
- 立即修复阻塞性问题
- 24小时内修复高优先级问题
- 72小时内修复中优先级问题
- 记录所有已知问题

## 报告模板

### 日报告模板
```markdown
# 测试日报 - [日期]

## 测试执行
- 执行用例: [数量]
- 通过: [数量]
- 失败: [数量]
- 阻塞: [数量]

## 主要问题
1. [问题描述]
2. [影响范围]
3. [解决方案]

## 明日计划
- [测试任务]
```

### 周报告模板
```markdown
# 测试周报 - [第X周]

## 总体进展
- 总体进度: [百分比]
- 关键功能: [状态]
- 风险点: [列表]

## 质量指标
- 缺陷密度: [数值]
- 修复率: [百分比]
- 重开率: [百分比]
```

## 工具链标准

### 测试工具
- **单元测试**: Jest, Go-test
- **集成测试**: Postman/Newman
- **E2E测试**: Playwright
- **性能测试**: k6
- **安全测试**: OWASP ZAP

### 持续集成
- **触发条件**: 每次代码提交
- **测试阶段**: 单元 → 集成 → E2E
- **报告**: 自动生成测试报告
- **通知**: 失败时立即通知

## 测试流程

1. **需求分析**: 理解PRD需求
2. **测试设计**: 编写测试用例
3. **环境准备**: 配置测试环境
4. **测试执行**: 按标准执行测试
5. **缺陷跟踪**: 记录和跟踪问题
6. **报告生成**: 生成测试报告
7. **验收确认**: 产品验收测试

## 角色职责

### 测试工程师
- 编写测试用例
- 执行测试
- 报告缺陷
- 生成报告

### 开发工程师
- 修复缺陷
- 代码审查
- 单元测试

### 产品经理
- 需求澄清
- 验收确认
- 优先级判定