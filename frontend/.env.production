# OpenPenPal Production Environment Configuration
# 生产环境配置 - 本地测试用，实际部署时使用 Vercel Dashboard 配置

# ====================
# CORE SETTINGS
# ====================
NODE_ENV=production
NEXT_PUBLIC_NODE_ENV=production

# ====================
# API CONFIGURATION
# ====================
# Replace with your actual production domains
NEXT_PUBLIC_API_URL=https://api.openpenpal.com
NEXT_PUBLIC_WS_URL=wss://api.openpenpal.com
NEXT_PUBLIC_GATEWAY_URL=https://api.openpenpal.com
NEXT_PUBLIC_FRONTEND_URL=https://www.openpenpal.com

# 微服务配置
NEXT_PUBLIC_WRITE_SERVICE_URL=https://write.openpenpal.com
NEXT_PUBLIC_COURIER_SERVICE_URL=https://courier.openpenpal.com
NEXT_PUBLIC_ADMIN_SERVICE_URL=https://admin.openpenpal.com
NEXT_PUBLIC_OCR_SERVICE_URL=https://ocr.openpenpal.com

# ====================
# APPLICATION SETTINGS
# ====================
NEXT_PUBLIC_APP_NAME=OpenPenPal
NEXT_PUBLIC_APP_VERSION=1.0.0
NEXT_PUBLIC_ENVIRONMENT=production

# ====================
# SECURITY CONFIGURATION
# ====================
# HTTPS/TLS
NEXT_PUBLIC_FORCE_HTTPS=true
HTTPS_ENABLED=true

# JWT Configuration (Server-side secrets)
JWT_SECRET=CHANGE_THIS_TO_A_VERY_STRONG_SECRET_AT_LEAST_64_CHARACTERS_LONG
JWT_REFRESH_SECRET=CHANGE_THIS_TO_ANOTHER_VERY_STRONG_SECRET_AT_LEAST_64_CHARACTERS
JWT_ACCESS_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d

# CSRF Protection
CSRF_SECRET=CHANGE_THIS_TO_A_STRONG_CSRF_SECRET_32_CHARACTERS
CSRF_ENABLED=true
CSRF_SAME_SITE=None
CSRF_SECURE=true

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REDIS_PREFIX=openpenpal:ratelimit:

# Security Headers
SECURITY_HEADERS_ENABLED=true
CSP_ENABLED=true
CSP_REPORT_ONLY=false
HSTS_ENABLED=true
HSTS_MAX_AGE=31536000
HSTS_INCLUDE_SUBDOMAINS=true
HSTS_PRELOAD=true

# ====================
# DATABASE CONFIGURATION
# ====================
DATABASE_URL=postgresql://prod_user:CHANGE_THIS_PASSWORD@prod-db.openpenpal.com:5432/openpenpal_prod
DB_TYPE=postgres
DB_SSL_MODE=require

# ====================
# REDIS CONFIGURATION
# ====================
REDIS_URL=redis://prod-redis.openpenpal.com:6379
REDIS_PASSWORD=CHANGE_THIS_REDIS_PASSWORD
REDIS_TLS=true

# ====================
# FEATURE FLAGS
# ====================
NEXT_PUBLIC_ENABLE_DEBUG=false
NEXT_PUBLIC_ENABLE_ANALYTICS=true
NEXT_PUBLIC_ENABLE_PWA=true
NEXT_PUBLIC_ENABLE_SECURITY_HEADERS=true
NEXT_PUBLIC_ENABLE_CSP=true
NEXT_PUBLIC_ENABLE_RATE_LIMITING=true

# ====================
# MONITORING & ANALYTICS
# ====================
NEXT_PUBLIC_GA_ID=G-XXXXXXXXXX
NEXT_PUBLIC_SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
NEXT_PUBLIC_CLARITY_ID=your-clarity-id
SENTRY_ENVIRONMENT=production

# Logging
LOG_LEVEL=warn
LOG_FORMAT=json
SECURITY_LOG_ENABLED=true
AUDIT_LOG_ENABLED=true

# ====================
# EMAIL CONFIGURATION
# ====================
SMTP_HOST=smtp.production-email-service.com
SMTP_PORT=587
SMTP_SECURE=true
SMTP_USER=noreply@openpenpal.com
SMTP_PASSWORD=CHANGE_THIS_SMTP_PASSWORD
EMAIL_FROM="OpenPenPal <noreply@openpenpal.com>"

# ====================
# FILE STORAGE
# ====================
STORAGE_TYPE=s3
AWS_S3_BUCKET=openpenpal-prod-assets
AWS_S3_REGION=us-east-1
AWS_ACCESS_KEY_ID=CHANGE_THIS_AWS_ACCESS_KEY
AWS_SECRET_ACCESS_KEY=CHANGE_THIS_AWS_SECRET_KEY

# Local storage fallback
UPLOAD_DIR=/var/data/openpenpal/uploads
MAX_FILE_SIZE=10MB

# ====================
# WEBSOCKET CONFIGURATION
# ====================
WS_ENABLED=true
WS_SSL=true
WS_MAX_CONNECTIONS=1000

# ====================
# AI SERVICE CONFIGURATION
# ====================
AI_SERVICE_ENABLED=true
AI_API_KEY=CHANGE_THIS_AI_API_KEY
AI_RATE_LIMIT=100

# ====================
# CORS CONFIGURATION
# ====================
CORS_ENABLED=true
CORS_ORIGIN=https://www.openpenpal.com,https://admin.openpenpal.com
CORS_CREDENTIALS=true

# ====================
# HEALTH CHECKS
# ====================
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_ENDPOINT=/health
DB_HEALTH_CHECK_ENABLED=true
REDIS_HEALTH_CHECK_ENABLED=true

# ====================
# DEPLOYMENT INFO
# ====================
DEPLOYMENT_VERSION=1.0.0
GIT_COMMIT_HASH=production-commit-hash

# ====================
# SECURITY CHECKLIST
# ====================
# CRITICAL: Before deploying to production:
# □ Change ALL passwords and secrets marked with "CHANGE_THIS"
# □ Use actual production domains and endpoints
# □ Verify TLS certificates are valid
# □ Test all security features in staging
# □ Set up monitoring and alerting
# □ Configure proper logging and backup