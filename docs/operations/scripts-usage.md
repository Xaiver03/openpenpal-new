# OpenPenPal å¯åŠ¨è„šæœ¬ä½¿ç”¨æŒ‡å—

> ğŸ”„ **æœ€æ–°æ›´æ–°**: 2024-01-20 - é‡æ–°æ•´ç†å¯åŠ¨è„šæœ¬ï¼Œç®€åŒ–ä½¿ç”¨æµç¨‹

## ğŸ“‹ å½“å‰å¯ç”¨çš„å¯åŠ¨è„šæœ¬

| è„šæœ¬åç§° | ç”¨é€” | æ¨èåœºæ™¯ | çŠ¶æ€ |
|---------|------|----------|------|
| `start-all.command` | åŒæ—¶å¯åŠ¨å‰åç«¯ | **é¦–æ¬¡å¯åŠ¨**æˆ–å®Œæ•´é‡å¯ | âœ… æ¨è |
| `start-backend.command` | åªå¯åŠ¨Goåç«¯ | å‰ç«¯å·²è¿è¡Œï¼Œé‡å¯åç«¯ | âœ… å¯ç”¨ |
| `start-frontend.command` | åªå¯åŠ¨Next.jså‰ç«¯ | åç«¯å·²è¿è¡Œï¼Œå¯åŠ¨å‰ç«¯ | âœ… æ¨è |
| `fix-npm.command` | ä¿®å¤npmæƒé™é—®é¢˜ | npmå®‰è£…å¤±è´¥æ—¶ | âœ… å·¥å…· |

## ğŸš€ æ¨èçš„å¯åŠ¨æ–¹å¼

### ğŸ¯ é¦–æ¬¡å¯åŠ¨æˆ–å®Œæ•´é‡å¯
```bash
./start-all.command
```

**é€‚ç”¨åœºæ™¯ï¼š**
- ç¬¬ä¸€æ¬¡å¯åŠ¨é¡¹ç›®
- ä¸¤ä¸ªæœåŠ¡éƒ½éœ€è¦é‡å¯
- ä¸ç¡®å®šå½“å‰æœåŠ¡çŠ¶æ€

**åŠŸèƒ½ï¼š**
- âœ… æ£€æŸ¥Goå’ŒNode.jsç¯å¢ƒ
- âœ… æ£€æŸ¥ç«¯å£å ç”¨
- âœ… å®‰è£…/æ›´æ–°ä¾èµ–
- âœ… å¯åŠ¨Goåç«¯æœåŠ¡ (8080ç«¯å£)
- âœ… å¯åŠ¨Next.jså‰ç«¯æœåŠ¡ (3000ç«¯å£)
- âœ… è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨
- âœ… æä¾›å®Œæ•´çš„æ—¥å¿—å’Œé”™è¯¯æç¤º

### ğŸŒ åªå¯åŠ¨å‰ç«¯ï¼ˆå½“å‰æ¨èï¼‰
```bash
./start-frontend.command
```

**é€‚ç”¨åœºæ™¯ï¼š**
- Goåç«¯å·²åœ¨è¿è¡Œ
- åªéœ€è¦å¯åŠ¨æˆ–é‡å¯å‰ç«¯
- å‰ç«¯å¼€å‘è°ƒè¯•

**åŠŸèƒ½ï¼š**
- âœ… æ£€æŸ¥Node.jsç¯å¢ƒ
- âœ… æ£€æŸ¥åç«¯æœåŠ¡çŠ¶æ€
- âœ… å®‰è£…å‰ç«¯ä¾èµ–
- âœ… åˆ›å»ºç¯å¢ƒé…ç½®æ–‡ä»¶
- âœ… å¯åŠ¨Next.jså¼€å‘æœåŠ¡å™¨
- âœ… è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨

### ğŸ”§ åªå¯åŠ¨åç«¯
```bash
./start-backend.command
```

**é€‚ç”¨åœºæ™¯ï¼š**
- å‰ç«¯å·²åœ¨è¿è¡Œ
- åªéœ€è¦å¯åŠ¨æˆ–é‡å¯åç«¯
- åç«¯å¼€å‘è°ƒè¯•

## ğŸ› ï¸ æ‰‹åŠ¨å¯åŠ¨æ–¹å¼

å¦‚æœä¸æƒ³ä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨å¯åŠ¨ï¼š

### å¯åŠ¨åç«¯
```bash
cd backend
go mod download
cp .env.example .env
go run main.go
```

### å¯åŠ¨å‰ç«¯
```bash
cd frontend
npm install
echo "NEXT_PUBLIC_API_URL=http://localhost:8080/api/v1" > .env.local
npm run dev
```

## ğŸŒ æœåŠ¡åœ°å€

å¯åŠ¨æˆåŠŸåï¼Œå¯ä»¥è®¿é—®ï¼š

- **å‰ç«¯ç•Œé¢**: http://localhost:3000
- **åç«¯API**: http://localhost:8080
- **å¥åº·æ£€æŸ¥**: http://localhost:8080/health
- **APIæ–‡æ¡£**: http://localhost:8080/api/v1/

## ğŸ” å¯ç”¨é¡µé¢è·¯ç”±

ç›®å‰å·²å®ç°çš„é¡µé¢ï¼š

| è·¯ç”± | é¡µé¢ | çŠ¶æ€ |
|------|------|------|
| `/` | é¦–é¡µ (çº¸é»„è‰²ä¸»é¢˜) | âœ… |
| `/write` | å†™ä¿¡é¡µé¢ | âœ… |
| `/mailbox` | æˆ‘çš„ä¿¡ç®± | âœ… |
| `/profile` | ä¸ªäººèµ„æ–™é¡µé¢ | âœ… |
| `/settings` | è®¾ç½®é¡µé¢ | âœ… |
| `/about` | å…³äºæˆ‘ä»¬é¡µé¢ | âœ… |
| `/courier/scan` | ä¿¡ä½¿æ‰«ç  | âœ… |
| `/404` | è‡ªå®šä¹‰404é¡µé¢ | âœ… |

**æ³¨æ„**: æ‰€æœ‰é¡µé¢å·²é‡‡ç”¨çº¸é»„è‰² (amber) ä¸»é¢˜è®¾è®¡ï¼Œæä¾›æ¸©æš–èˆ’é€‚çš„ç”¨æˆ·ä½“éªŒã€‚

## ğŸ› æ•…éšœæ’é™¤

### 1. Goç¯å¢ƒé—®é¢˜
```bash
# æ£€æŸ¥Goæ˜¯å¦å®‰è£…
go version

# å¦‚æœæœªå®‰è£…ï¼Œéœ€è¦å…ˆå®‰è£…Go
brew install go  # macOS
```

### 2. ç«¯å£è¢«å ç”¨
```bash
# æŸ¥çœ‹ç«¯å£å ç”¨
lsof -i :8080  # åç«¯ç«¯å£
lsof -i :3000  # å‰ç«¯ç«¯å£

# æ€æ­»å ç”¨è¿›ç¨‹
kill -9 <PID>
```

### 3. npmæƒé™é—®é¢˜
```bash
# ä½¿ç”¨ä¿®å¤è„šæœ¬
./fix-npm.command

# æˆ–æ‰‹åŠ¨ä¿®å¤
sudo chown -R $(whoami) ~/.npm
npm cache clean --force
```

### 4. æ•°æ®åº“é—®é¢˜
```bash
# åˆ é™¤æ•°æ®åº“æ–‡ä»¶é‡æ–°åˆå§‹åŒ–
rm backend/openpenpal.db
# é‡æ–°å¯åŠ¨åç«¯æœåŠ¡
```

## ğŸ“ æµ‹è¯•è´¦æˆ·

å¼€å‘ç¯å¢ƒé»˜è®¤åˆ›å»ºçš„æµ‹è¯•è´¦æˆ·ï¼š

| ç”¨æˆ·å | å¯†ç  | è§’è‰² | å­¦æ ¡ä»£ç  |
|--------|------|------|----------|
| alice | secret | ç”¨æˆ· | BJDX01 |
| bob | secret | ç”¨æˆ· | BJDX01 |
| courier1 | secret | ä¿¡ä½¿ | BJDX01 |

## ğŸ”§ å¼€å‘è°ƒè¯•

### æŸ¥çœ‹æ—¥å¿—
```bash
# æŸ¥çœ‹åç«¯æ—¥å¿—ï¼ˆå¦‚æœä½¿ç”¨start-all.commandå¯åŠ¨ï¼‰
tail -f logs/backend.log

# æŸ¥çœ‹å‰ç«¯æ—¥å¿—
tail -f logs/frontend.log
```

### APIæµ‹è¯•
```bash
# æµ‹è¯•åç«¯å¥åº·æ£€æŸ¥
curl http://localhost:8080/health

# æµ‹è¯•ç”¨æˆ·æ³¨å†Œ
curl -X POST http://localhost:8080/api/v1/auth/register \
  -H "Content-Type: application/json" \
  -d '{"username":"test","email":"test@example.com","password":"password123","nickname":"Test","school_code":"BJDX01"}'
```

## ğŸ“ è·å¾—å¸®åŠ©

### å¯åŠ¨å¤±è´¥ï¼Ÿ
1. æŸ¥çœ‹é”™è¯¯æ—¥å¿—
2. æ£€æŸ¥Goå’ŒNode.jsç¯å¢ƒ
3. å°è¯•ä½¿ç”¨ `fix-npm.command` ä¿®å¤npmé—®é¢˜
4. æŸ¥çœ‹æ•…éšœæ’é™¤ç« èŠ‚

### éœ€è¦æ”¯æŒï¼Ÿ
- ğŸ“– æŸ¥çœ‹[å¼€å‘æ–‡æ¡£](./å¼€å‘æ–‡æ¡£.md)
- ğŸ—ºï¸ æŸ¥çœ‹[å¼€å‘è®¡åˆ’](./å¼€å‘è®¡åˆ’.md)
- ğŸ  è¿”å›[é¡¹ç›®é¦–é¡µ](../README.md)

---

*è®©å¯åŠ¨å˜å¾—ç®€å•ï¼Œè®©å¼€å‘æ›´åŠ ä¸“æ³¨ï¼* ğŸš€âœ¨