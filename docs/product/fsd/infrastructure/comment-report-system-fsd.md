# OpenPenPal è¯„è®ºä¸¾æŠ¥ç³»ç»Ÿ FSDï¼ˆComment Report Systemï¼‰

**åŠŸèƒ½è§„æ ¼è¯´æ˜ä¹¦**

## 1. ç³»ç»Ÿæ¦‚è¿°

### 1.1 ç³»ç»Ÿç›®æ ‡
è¯„è®ºä¸¾æŠ¥ç³»ç»Ÿæ˜¯OpenPenPalå¹³å°çš„å†…å®¹å®‰å…¨ä¿éšœæ ¸å¿ƒç»„ä»¶ï¼Œæ—¨åœ¨ä¸ºç”¨æˆ·æä¾›ä¾¿æ·çš„ä¸¾æŠ¥æœºåˆ¶ï¼Œå¹¶ä¸ºç®¡ç†å‘˜æä¾›é«˜æ•ˆçš„ä¸¾æŠ¥å¤„ç†å·¥å…·ï¼Œç¡®ä¿å¹³å°å†…å®¹çš„å¥åº·å’Œå®‰å…¨ã€‚

### 1.2 ä¸šåŠ¡èƒŒæ™¯
- **ç¤¾åŒºå†…å®¹ç®¡ç†**: ç»´æŠ¤è‰¯å¥½çš„ç¤¾åŒºæ°›å›´ï¼ŒåŠæ—¶å¤„ç†ä¸å½“å†…å®¹
- **ç”¨æˆ·ä½“éªŒä¿éšœ**: ä¿æŠ¤ç”¨æˆ·å…å—åƒåœ¾ä¿¡æ¯ã€éªšæ‰°ç­‰ä¸è‰¯è¡Œä¸ºå½±å“
- **æ³•è§„åˆè§„**: ç¬¦åˆç›¸å…³æ³•å¾‹æ³•è§„å¯¹ç½‘ç»œå†…å®¹ç®¡ç†çš„è¦æ±‚
- **å¹³å°å£°èª‰**: ç»´æŠ¤OpenPenPalä½œä¸ºé«˜è´¨é‡æ ¡å›­äº¤æµå¹³å°çš„å“ç‰Œå½¢è±¡

### 1.3 ç³»ç»ŸèŒƒå›´
- **ç”¨æˆ·ä¸¾æŠ¥åŠŸèƒ½**: æ”¯æŒå¯¹è¯„è®ºå†…å®¹çš„å¤šç±»å‹ä¸¾æŠ¥
- **ç®¡ç†å‘˜å®¡æ ¸**: å®Œæ•´çš„ä¸¾æŠ¥å¤„ç†å·¥ä½œæµç¨‹
- **è‡ªåŠ¨åŒ–è¾…åŠ©**: æ™ºèƒ½å†…å®¹æ£€æµ‹å’Œé£é™©è¯„ä¼°
- **ç»Ÿè®¡åˆ†æ**: ä¸¾æŠ¥æ•°æ®ç»Ÿè®¡å’Œè¶‹åŠ¿åˆ†æ
- **é€šçŸ¥åé¦ˆ**: ä¸¾æŠ¥å¤„ç†ç»“æœé€šçŸ¥æœºåˆ¶

## 2. åŠŸèƒ½éœ€æ±‚è§„æ ¼

### 2.1 æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

#### 2.1.1 ç”¨æˆ·ä¸¾æŠ¥åŠŸèƒ½
**FR-UR-001: ä¸¾æŠ¥å…¥å£**
- ç”¨æˆ·å¯åœ¨ä»»ä½•è¯„è®ºçš„æ“ä½œèœå•ä¸­æ‰¾åˆ°"ä¸¾æŠ¥"é€‰é¡¹
- ä¸¾æŠ¥æŒ‰é’®åœ¨ç”¨æˆ·hoveræ—¶æ˜¾ç¤ºï¼Œä¸ä¼šå¯¹è‡ªå·±çš„è¯„è®ºæ˜¾ç¤ºä¸¾æŠ¥é€‰é¡¹
- æ”¯æŒå¿«é€Ÿä¸¾æŠ¥å’Œè¯¦ç»†ä¸¾æŠ¥ä¸¤ç§æ¨¡å¼

**FR-UR-002: ä¸¾æŠ¥åˆ†ç±»**
ç³»ç»Ÿæ”¯æŒä»¥ä¸‹ä¸¾æŠ¥ç±»å‹ï¼š
```
1. åƒåœ¾ä¿¡æ¯ (spam)
   - æè¿°ï¼šåƒåœ¾é‚®ä»¶ã€å¹¿å‘Šæˆ–é‡å¤å†…å®¹
   - å¤„ç†ä¼˜å…ˆçº§ï¼šä¸­ç­‰
   
2. ä¸å½“å†…å®¹ (inappropriate)
   - æè¿°ï¼šä¸ç¬¦åˆç¤¾åŒºå‡†åˆ™çš„å†…å®¹
   - å¤„ç†ä¼˜å…ˆçº§ï¼šé«˜
   
3. å†’çŠ¯æ€§å†…å®¹ (offensive)
   - æè¿°ï¼šä»‡æ¨è¨€è®ºã€éªšæ‰°æˆ–æ¶æ„æ”»å‡»
   - å¤„ç†ä¼˜å…ˆçº§ï¼šé«˜
   
4. è™šå‡ä¿¡æ¯ (false_info)
   - æè¿°ï¼šè¯¯å¯¼æ€§æˆ–ä¸å‡†ç¡®çš„ä¿¡æ¯
   - å¤„ç†ä¼˜å…ˆçº§ï¼šä¸­ç­‰
   
5. å…¶ä»– (other)
   - æè¿°ï¼šå…¶ä»–è¿è§„è¡Œä¸º
   - å¤„ç†ä¼˜å…ˆçº§ï¼šä½
```

**FR-UR-003: ä¸¾æŠ¥è¡¨å•**
- å¿…å¡«å­—æ®µï¼šä¸¾æŠ¥åŸå› ï¼ˆå•é€‰ï¼‰
- å¯é€‰å­—æ®µï¼šè¯¦ç»†æè¿°ï¼ˆæœ€å¤š500å­—ç¬¦ï¼‰
- è¡¨å•éªŒè¯ï¼šå®æ—¶éªŒè¯ç”¨æˆ·è¾“å…¥
- ç”¨æˆ·å‹å¥½æç¤ºï¼šè¯´æ˜ä¸¾æŠ¥æµç¨‹å’Œæ³¨æ„äº‹é¡¹

**FR-UR-004: é‡å¤ä¸¾æŠ¥é˜²æŠ¤**
- åŒä¸€ç”¨æˆ·å¯¹åŒä¸€è¯„è®ºåªèƒ½ä¸¾æŠ¥ä¸€æ¬¡
- ç³»ç»Ÿè‡ªåŠ¨æ£€æµ‹å¹¶é˜»æ­¢é‡å¤ä¸¾æŠ¥
- å¯¹é‡å¤ä¸¾æŠ¥å°è¯•ç»™å‡ºå‹å¥½æç¤º

#### 2.1.2 ç®¡ç†å‘˜å®¡æ ¸ç³»ç»Ÿ
**FR-MA-001: ä¸¾æŠ¥åˆ—è¡¨ç®¡ç†**
- æ”¯æŒæŒ‰çŠ¶æ€ç­›é€‰ï¼šå¾…å¤„ç†ã€å·²è§£å†³ã€å·²é©³å›
- æ”¯æŒæŒ‰ä¸¾æŠ¥ç±»å‹ç­›é€‰
- æ”¯æŒæŒ‰æ—¶é—´èŒƒå›´ç­›é€‰
- åˆ†é¡µæ˜¾ç¤ºï¼Œæ¯é¡µ20æ¡è®°å½•

**FR-MA-002: ä¸¾æŠ¥è¯¦æƒ…æŸ¥çœ‹**
```
ä¸¾æŠ¥è¯¦æƒ…åŒ…å«ï¼š
- ä¸¾æŠ¥åŸºæœ¬ä¿¡æ¯ï¼šIDã€æ—¶é—´ã€çŠ¶æ€
- ä¸¾æŠ¥åŸå› å’Œè¯¦ç»†æè¿°
- è¢«ä¸¾æŠ¥è¯„è®ºçš„å®Œæ•´å†…å®¹
- è¯„è®ºä½œè€…ä¿¡æ¯ï¼ˆè„±æ•å¤„ç†ï¼‰
- ä¸¾æŠ¥è€…ä¿¡æ¯ï¼ˆè„±æ•å¤„ç†ï¼‰
- ç›¸å…³ä¸Šä¸‹æ–‡ï¼ˆè¯„è®ºæ‰€åœ¨çš„è®¨è®ºä¸²ï¼‰
```

**FR-MA-003: ä¸¾æŠ¥å¤„ç†æ“ä½œ**
ç®¡ç†å‘˜å¯æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š
```
1. è§£å†³ä¸¾æŠ¥ (resolved)
   - éšè—è¢«ä¸¾æŠ¥è¯„è®º
   - åˆ é™¤è¢«ä¸¾æŠ¥è¯„è®º
   - å¯¹è¯„è®ºä½œè€…å‘å‡ºè­¦å‘Š
   - è®°å½•å¤„ç†åŸå› 

2. é©³å›ä¸¾æŠ¥ (dismissed)
   - ä¿ç•™è¯„è®ºå†…å®¹
   - æ ‡è®°ä¸¾æŠ¥ä¸ºæ— æ•ˆ
   - è®°å½•é©³å›åŸå› 
   
3. æ‰¹é‡å¤„ç†
   - æ”¯æŒåŒæ—¶å¤„ç†å¤šä¸ªç›¸ä¼¼ä¸¾æŠ¥
   - æ‰¹é‡æ“ä½œç¡®è®¤æœºåˆ¶
```

**FR-MA-004: å¤„ç†å†å²è®°å½•**
- è®°å½•æ‰€æœ‰å¤„ç†æ“ä½œçš„è¯¦ç»†ä¿¡æ¯
- åŒ…å«å¤„ç†äººå‘˜ã€å¤„ç†æ—¶é—´ã€å¤„ç†æ–¹å¼ã€å¤„ç†åŸå› 
- æ”¯æŒå¤„ç†å†å²çš„æŸ¥è¯¢å’Œå¯¼å‡º

#### 2.1.3 è‡ªåŠ¨åŒ–æ£€æµ‹è¾…åŠ©
**FR-AD-001: æ™ºèƒ½é£é™©è¯„ä¼°**
ç³»ç»Ÿè‡ªåŠ¨è¯„ä¼°ä¸¾æŠ¥å†…å®¹çš„é£é™©ç­‰çº§ï¼š
```
é£é™©è¯„ä¼°ç®—æ³•ï¼š
1. å…³é”®è¯åŒ¹é…
   - ç»´æŠ¤æ•æ„Ÿè¯åº“
   - æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…
   - åŠ¨æ€æ›´æ–°è¯åº“

2. è¡Œä¸ºæ¨¡å¼åˆ†æ
   - ç”¨æˆ·å†å²ä¸¾æŠ¥è®°å½•
   - è¯„è®ºå‘å¸ƒé¢‘ç‡å¼‚å¸¸
   - è´¦æˆ·æ³¨å†Œæ—¶é—´å’Œæ´»è·ƒåº¦

3. å†…å®¹ç‰¹å¾åˆ†æ
   - é‡å¤å­—ç¬¦æ£€æµ‹
   - é“¾æ¥å’Œè”ç³»æ–¹å¼æ£€æµ‹
   - è¯­è¨€é£æ ¼å¼‚å¸¸åˆ†æ
```

**FR-AD-002: è‡ªåŠ¨é¢„å¤„ç†**
- é«˜é£é™©å†…å®¹è‡ªåŠ¨æ ‡è®°ä¸º"å¾…å®¡æ ¸"çŠ¶æ€
- æ˜æ˜¾è¿è§„å†…å®¹è‡ªåŠ¨éšè—ï¼Œç­‰å¾…äººå·¥ç¡®è®¤
- ç–‘ä¼¼åƒåœ¾å†…å®¹æ‰¹é‡æ£€æµ‹å’Œæ ‡è®°

#### 2.1.4 ç»Ÿè®¡åˆ†æåŠŸèƒ½
**FR-SA-001: å®æ—¶ç»Ÿè®¡é¢æ¿**
```
ç®¡ç†å‘˜æ§åˆ¶å°æ˜¾ç¤ºï¼š
- æ€»ä¸¾æŠ¥æ•°é‡
- ä»Šæ—¥æ–°å¢ä¸¾æŠ¥æ•°
- å¾…å¤„ç†ä¸¾æŠ¥æ•°é‡
- å„ç±»å‹ä¸¾æŠ¥åˆ†å¸ƒ
- å¤„ç†æ•ˆç‡ç»Ÿè®¡
```

**FR-SA-002: è¶‹åŠ¿åˆ†ææŠ¥å‘Š**
- æŒ‰æ—¶é—´ç»´åº¦çš„ä¸¾æŠ¥è¶‹åŠ¿å›¾
- æŒ‰ç±»å‹ç»´åº¦çš„ä¸¾æŠ¥åˆ†å¸ƒå›¾
- é‡ç‚¹ç”¨æˆ·ä¸¾æŠ¥è¡Œä¸ºåˆ†æ
- ç¤¾åŒºå†…å®¹å¥åº·åº¦æŒ‡æ ‡

### 2.2 æ•°æ®æ¨¡å‹è§„æ ¼

#### 2.2.1 æ ¸å¿ƒæ•°æ®æ¨¡å‹
```sql
-- è¯„è®ºä¸¾æŠ¥è¡¨
CREATE TABLE comment_reports (
    id VARCHAR(36) PRIMARY KEY,
    comment_id VARCHAR(36) NOT NULL,
    reporter_id VARCHAR(36) NOT NULL,
    reason VARCHAR(100) NOT NULL,
    description TEXT,
    status VARCHAR(20) DEFAULT 'pending',
    handled_at TIMESTAMP NULL,
    handled_by VARCHAR(36) NULL,
    handler_note TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    deleted_at TIMESTAMP NULL,
    
    -- ç´¢å¼•
    INDEX idx_comment_id (comment_id),
    INDEX idx_reporter_id (reporter_id),
    INDEX idx_status (status),
    INDEX idx_created_at (created_at),
    
    -- å¤–é”®çº¦æŸ
    FOREIGN KEY (comment_id) REFERENCES comments(id) ON DELETE CASCADE,
    FOREIGN KEY (reporter_id) REFERENCES users(id) ON DELETE CASCADE,
    FOREIGN KEY (handled_by) REFERENCES users(id) ON DELETE SET NULL,
    
    -- å”¯ä¸€çº¦æŸï¼ˆé˜²æ­¢é‡å¤ä¸¾æŠ¥ï¼‰
    UNIQUE KEY uk_comment_reporter (comment_id, reporter_id)
);
```

#### 2.2.2 çŠ¶æ€æµè½¬æ¨¡å‹
```
ä¸¾æŠ¥çŠ¶æ€æµè½¬ï¼š
pending -> resolved (è§£å†³)
pending -> dismissed (é©³å›)

çŠ¶æ€è¯´æ˜ï¼š
- pending: å¾…å¤„ç†ï¼ˆåˆå§‹çŠ¶æ€ï¼‰
- resolved: å·²è§£å†³ï¼ˆç®¡ç†å‘˜ç¡®è®¤ä¸¾æŠ¥æœ‰æ•ˆå¹¶å¤„ç†ï¼‰
- dismissed: å·²é©³å›ï¼ˆç®¡ç†å‘˜ç¡®è®¤ä¸¾æŠ¥æ— æ•ˆï¼‰
```

### 2.3 APIæ¥å£è§„æ ¼

#### 2.3.1 ç”¨æˆ·ä¸¾æŠ¥æ¥å£
```http
POST /api/v2/comments/{commentId}/report
Content-Type: application/json
Authorization: Bearer {token}

Request Body:
{
  "reason": "spam|inappropriate|offensive|false_info|other",
  "description": "è¯¦ç»†æè¿°ï¼ˆå¯é€‰ï¼Œæœ€å¤š500å­—ç¬¦ï¼‰"
}

Response (200 OK):
{
  "success": true,
  "message": "ä¸¾æŠ¥å·²æäº¤æˆåŠŸ",
  "report_id": "report-uuid"
}

Response (400 Bad Request):
{
  "success": false,
  "error": "ALREADY_REPORTED",
  "message": "æ‚¨å·²ç»ä¸¾æŠ¥è¿‡æ­¤è¯„è®º"
}
```

#### 2.3.2 ç®¡ç†å‘˜å®¡æ ¸æ¥å£
```http
GET /api/v2/admin/reports
Authorization: Bearer {admin-token}
Query Parameters:
- status: pending|resolved|dismissed|all (é»˜è®¤: pending)
- reason: ä¸¾æŠ¥ç±»å‹ç­›é€‰
- page: é¡µç  (é»˜è®¤: 1)
- limit: æ¯é¡µæ•°é‡ (é»˜è®¤: 20)
- sort: created_at|status (é»˜è®¤: created_at)
- order: asc|desc (é»˜è®¤: desc)

Response (200 OK):
{
  "success": true,
  "data": {
    "reports": [
      {
        "id": "report-uuid",
        "comment_id": "comment-uuid",
        "reason": "spam",
        "description": "è¿™æ˜¯åƒåœ¾å¹¿å‘Š",
        "status": "pending",
        "created_at": "2025-08-15T10:00:00Z",
        "comment": {
          "id": "comment-uuid",
          "content": "è¯„è®ºå†…å®¹...",
          "user": {
            "id": "user-uuid",
            "username": "user123",
            "nickname": "ç”¨æˆ·æ˜µç§°"
          }
        },
        "reporter": {
          "id": "reporter-uuid",
          "username": "reporter1",
          "nickname": "ä¸¾æŠ¥è€…æ˜µç§°"
        }
      }
    ],
    "pagination": {
      "page": 1,
      "limit": 20,
      "total": 156,
      "pages": 8
    },
    "stats": {
      "total": 156,
      "pending": 23,
      "resolved": 108,
      "dismissed": 25
    }
  }
}
```

```http
PUT /api/v2/admin/reports/{reportId}
Authorization: Bearer {admin-token}
Content-Type: application/json

Request Body:
{
  "status": "resolved|dismissed",
  "handler_note": "å¤„ç†è¯´æ˜ï¼ˆå¯é€‰ï¼‰",
  "comment_action": "hide|delete|none" // å¯¹è¯„è®ºçš„å¤„ç†åŠ¨ä½œ
}

Response (200 OK):
{
  "success": true,
  "message": "ä¸¾æŠ¥å¤„ç†å®Œæˆ",
  "report": {
    "id": "report-uuid",
    "status": "resolved",
    "handled_at": "2025-08-15T11:00:00Z",
    "handled_by": "admin-uuid",
    "handler_note": "å†…å®¹ç¡®å®è¿è§„ï¼Œå·²éšè—"
  }
}
```

## 3. ç³»ç»Ÿé›†æˆè§„æ ¼

### 3.1 ä¸è¯„è®ºç³»ç»Ÿé›†æˆ
- **æ•°æ®å…³è”**: ä¸¾æŠ¥è®°å½•é€šè¿‡comment_idä¸è¯„è®ºç³»ç»Ÿå…³è”
- **çŠ¶æ€åŒæ­¥**: è¯„è®ºè¢«åˆ é™¤æ—¶ï¼Œç›¸å…³ä¸¾æŠ¥è‡ªåŠ¨æ ‡è®°ä¸º"å·²è§£å†³"
- **æƒé™æ§åˆ¶**: ç»§æ‰¿è¯„è®ºç³»ç»Ÿçš„æƒé™æ¨¡å‹

### 3.2 ä¸ç”¨æˆ·ç³»ç»Ÿé›†æˆ
- **èº«ä»½éªŒè¯**: ä½¿ç”¨ç»Ÿä¸€çš„JWTèº«ä»½è®¤è¯
- **æƒé™éªŒè¯**: ç®¡ç†å‘˜æƒé™éªŒè¯é€šè¿‡ç”¨æˆ·è§’è‰²ç³»ç»Ÿ
- **ç”¨æˆ·è¡Œä¸ºè®°å½•**: ä¸¾æŠ¥è¡Œä¸ºè®°å½•åˆ°ç”¨æˆ·æ´»åŠ¨æ—¥å¿—

### 3.3 ä¸é€šçŸ¥ç³»ç»Ÿé›†æˆ
- **ä¸¾æŠ¥ç¡®è®¤é€šçŸ¥**: ç”¨æˆ·æäº¤ä¸¾æŠ¥åæ”¶åˆ°ç¡®è®¤é€šçŸ¥
- **å¤„ç†ç»“æœé€šçŸ¥**: ä¸¾æŠ¥å¤„ç†å®Œæˆåé€šçŸ¥ç›¸å…³ç”¨æˆ·
- **ç®¡ç†å‘˜æé†’**: æ–°ä¸¾æŠ¥è‡ªåŠ¨é€šçŸ¥åœ¨çº¿ç®¡ç†å‘˜

### 3.4 ä¸å®¡æ ¸ç³»ç»Ÿé›†æˆ
- **å†…å®¹å®¡æ ¸**: è¢«ä¸¾æŠ¥å†…å®¹è‡ªåŠ¨è¿›å…¥å®¡æ ¸é˜Ÿåˆ—
- **è§„åˆ™å¼•æ“**: ä¸å¹³å°å®¡æ ¸è§„åˆ™å¼•æ“è”åŠ¨
- **é»‘åå•ç®¡ç†**: ä¸¥é‡è¿è§„ç”¨æˆ·è‡ªåŠ¨åŠ å…¥é»‘åå•

## 4. æ€§èƒ½ä¸å¯ç”¨æ€§éœ€æ±‚

### 4.1 æ€§èƒ½è¦æ±‚
- **å“åº”æ—¶é—´**: ä¸¾æŠ¥æäº¤å“åº”æ—¶é—´ < 500ms
- **æŸ¥è¯¢æ€§èƒ½**: ç®¡ç†å‘˜åˆ—è¡¨æŸ¥è¯¢å“åº”æ—¶é—´ < 1s
- **å¹¶å‘å¤„ç†**: æ”¯æŒ1000+å¹¶å‘ä¸¾æŠ¥æäº¤
- **æ•°æ®åº“ä¼˜åŒ–**: é‡è¦æŸ¥è¯¢å­—æ®µå»ºç«‹ç´¢å¼•

### 4.2 å¯ç”¨æ€§è¦æ±‚
- **ç³»ç»Ÿå¯ç”¨æ€§**: 99.9%
- **æ•…éšœæ¢å¤**: è‡ªåŠ¨æ•…éšœæ£€æµ‹å’Œæ¢å¤
- **æ•°æ®å¤‡ä»½**: æ¯æ—¥è‡ªåŠ¨å¤‡ä»½ä¸¾æŠ¥æ•°æ®
- **å®¹ç¾æœºåˆ¶**: æ”¯æŒå¼‚åœ°å®¹ç¾éƒ¨ç½²

### 4.3 æ‰©å±•æ€§è¦æ±‚
- **æ°´å¹³æ‰©å±•**: æ”¯æŒå¾®æœåŠ¡æ¶æ„ä¸‹çš„æ°´å¹³æ‰©å±•
- **å­˜å‚¨æ‰©å±•**: æ”¯æŒåˆ†è¡¨åˆ†åº“ç­–ç•¥
- **åŠŸèƒ½æ‰©å±•**: é¢„ç•™æ¥å£æ”¯æŒæ–°çš„ä¸¾æŠ¥ç±»å‹
- **é›†æˆæ‰©å±•**: æ”¯æŒç¬¬ä¸‰æ–¹å†…å®¹å®¡æ ¸æœåŠ¡é›†æˆ

## 5. å®‰å…¨æ€§è¦æ±‚

### 5.1 æ•°æ®å®‰å…¨
- **æ•æ„Ÿä¿¡æ¯ä¿æŠ¤**: ä¸¾æŠ¥è€…èº«ä»½ä¿¡æ¯è„±æ•å­˜å‚¨
- **è®¿é—®æ§åˆ¶**: ä¸¥æ ¼çš„è§’è‰²æƒé™æ§åˆ¶
- **æ•°æ®åŠ å¯†**: æ•æ„Ÿå­—æ®µæ•°æ®åº“åŠ å¯†å­˜å‚¨
- **å®¡è®¡æ—¥å¿—**: å®Œæ•´çš„æ“ä½œå®¡è®¡æ—¥å¿—

### 5.2 ä¸šåŠ¡å®‰å…¨
- **é˜²åˆ·æœºåˆ¶**: é˜²æ­¢æ¶æ„æ‰¹é‡ä¸¾æŠ¥
- **éªŒè¯ç ä¿æŠ¤**: æ•æ„Ÿæ“ä½œå¢åŠ éªŒè¯ç éªŒè¯
- **IPé™åˆ¶**: å¯¹å¼‚å¸¸IPè¿›è¡Œè®¿é—®é™åˆ¶
- **å†…å®¹è¿‡æ»¤**: ä¸¾æŠ¥æè¿°å†…å®¹å®‰å…¨è¿‡æ»¤

### 5.3 ç³»ç»Ÿå®‰å…¨
- **SQLæ³¨å…¥é˜²æŠ¤**: å‚æ•°åŒ–æŸ¥è¯¢é˜²æ­¢SQLæ³¨å…¥
- **XSSé˜²æŠ¤**: è¾“å‡ºå†…å®¹XSSè¿‡æ»¤
- **CSRFé˜²æŠ¤**: CSRF TokenéªŒè¯
- **æ¥å£é™æµ**: APIæ¥å£è®¿é—®é¢‘ç‡é™åˆ¶

## 6. ç›‘æ§ä¸å‘Šè­¦

### 6.1 ä¸šåŠ¡ç›‘æ§
- **ä¸¾æŠ¥æ•°é‡ç›‘æ§**: å®æ—¶ç›‘æ§ä¸¾æŠ¥æäº¤é‡
- **å¤„ç†æ•ˆç‡ç›‘æ§**: ç›‘æ§ä¸¾æŠ¥å¤„ç†æ—¶æ•ˆ
- **å¼‚å¸¸è¡Œä¸ºç›‘æ§**: ç›‘æ§å¼‚å¸¸ä¸¾æŠ¥æ¨¡å¼
- **ç”¨æˆ·è¡Œä¸ºç›‘æ§**: ç›‘æ§ç”¨æˆ·ä¸¾æŠ¥è¡Œä¸ºå¼‚å¸¸

### 6.2 æŠ€æœ¯ç›‘æ§
- **ç³»ç»Ÿæ€§èƒ½ç›‘æ§**: CPUã€å†…å­˜ã€æ•°æ®åº“æ€§èƒ½
- **æ¥å£å“åº”ç›‘æ§**: APIå“åº”æ—¶é—´å’ŒæˆåŠŸç‡
- **é”™è¯¯æ—¥å¿—ç›‘æ§**: ç³»ç»Ÿé”™è¯¯å’Œå¼‚å¸¸ç›‘æ§
- **ä¾èµ–æœåŠ¡ç›‘æ§**: å¤–éƒ¨ä¾èµ–æœåŠ¡å¯ç”¨æ€§

### 6.3 å‘Šè­¦ç­–ç•¥
```
å‘Šè­¦ç­‰çº§ï¼š
1. ç´§æ€¥å‘Šè­¦ï¼ˆç«‹å³å¤„ç†ï¼‰
   - ç³»ç»ŸæœåŠ¡ä¸å¯ç”¨
   - å¤§é‡ä¸¾æŠ¥å¤„ç†å¤±è´¥
   - æ•°æ®å®‰å…¨å¼‚å¸¸

2. é‡è¦å‘Šè­¦ï¼ˆ1å°æ—¶å†…å¤„ç†ï¼‰
   - ä¸¾æŠ¥å¤„ç†ç§¯å‹è¶…è¿‡é˜ˆå€¼
   - APIå“åº”æ—¶é—´è¶…è¿‡2ç§’
   - å¼‚å¸¸ä¸¾æŠ¥è¡Œä¸ºæ£€æµ‹

3. ä¸€èˆ¬å‘Šè­¦ï¼ˆ24å°æ—¶å†…å¤„ç†ï¼‰
   - ä¸¾æŠ¥æ•°é‡å¼‚å¸¸å¢é•¿
   - å¤„ç†æ•ˆç‡ä¸‹é™
   - éå…³é”®åŠŸèƒ½å¼‚å¸¸
```

## 7. å®æ–½è®¡åˆ’

### 7.1 å¼€å‘é˜¶æ®µåˆ’åˆ†
```
Phase 1: æ ¸å¿ƒåŠŸèƒ½å¼€å‘ (å·²å®Œæˆ)
- âœ… åŸºç¡€æ•°æ®æ¨¡å‹è®¾è®¡
- âœ… ç”¨æˆ·ä¸¾æŠ¥APIå®ç°
- âœ… ç®¡ç†å‘˜å®¡æ ¸APIå®ç°
- âœ… å‰ç«¯ä¸¾æŠ¥ç»„ä»¶å¼€å‘
- âœ… ç®¡ç†å‘˜å®¡æ ¸ç•Œé¢å¼€å‘

Phase 2: å¢å¼ºåŠŸèƒ½å¼€å‘ (è¿›è¡Œä¸­)
- ğŸ”„ è‡ªåŠ¨åŒ–æ£€æµ‹ç®—æ³•ä¼˜åŒ–
- ğŸ”„ ç»Ÿè®¡åˆ†æåŠŸèƒ½å®Œå–„
- ğŸ”„ é€šçŸ¥ç³»ç»Ÿé›†æˆ
- ğŸ”„ æ‰¹é‡å¤„ç†åŠŸèƒ½

Phase 3: ä¼˜åŒ–ä¸ç›‘æ§ (è®¡åˆ’ä¸­)
- ğŸ“‹ æ€§èƒ½ä¼˜åŒ–
- ğŸ“‹ ç›‘æ§å‘Šè­¦ç³»ç»Ÿ
- ğŸ“‹ å®‰å…¨åŠ å›º
- ğŸ“‹ ç”¨æˆ·ä½“éªŒä¼˜åŒ–
```

### 7.2 æµ‹è¯•ç­–ç•¥
- **å•å…ƒæµ‹è¯•**: æ ¸å¿ƒä¸šåŠ¡é€»è¾‘å•å…ƒæµ‹è¯•è¦†ç›–ç‡ > 90%
- **é›†æˆæµ‹è¯•**: APIæ¥å£é›†æˆæµ‹è¯•
- **å‹åŠ›æµ‹è¯•**: é«˜å¹¶å‘åœºæ™¯å‹åŠ›æµ‹è¯•
- **å®‰å…¨æµ‹è¯•**: å®‰å…¨æ¼æ´æ‰«æå’Œæ¸—é€æµ‹è¯•
- **ç”¨æˆ·ä½“éªŒæµ‹è¯•**: çœŸå®ç”¨æˆ·åœºæ™¯æµ‹è¯•

### 7.3 éƒ¨ç½²ç­–ç•¥
- **ç°åº¦å‘å¸ƒ**: é€æ­¥æ¨å¹¿ï¼Œé™ä½é£é™©
- **æ•°æ®è¿ç§»**: å¹³æ»‘çš„æ•°æ®è¿ç§»ç­–ç•¥
- **å›æ»šæœºåˆ¶**: å¿«é€Ÿå›æ»šæœºåˆ¶
- **ç›‘æ§éƒ¨ç½²**: éƒ¨ç½²è¿‡ç¨‹å…¨ç¨‹ç›‘æ§

## 8. è¿ç»´ä¸ç»´æŠ¤

### 8.1 æ—¥å¸¸è¿ç»´
- **æ•°æ®å¤‡ä»½**: æ¯æ—¥è‡ªåŠ¨å¤‡ä»½ï¼Œæ¯å‘¨å…¨é‡å¤‡ä»½
- **æ€§èƒ½ç›‘æ§**: å®æ—¶æ€§èƒ½æŒ‡æ ‡ç›‘æ§
- **æ—¥å¿—ç®¡ç†**: æ—¥å¿—è½®è½¬å’Œå½’æ¡£ç­–ç•¥
- **å®¹é‡è§„åˆ’**: å®šæœŸè¯„ä¼°ç³»ç»Ÿå®¹é‡éœ€æ±‚

### 8.2 åº”æ€¥å“åº”
- **æ•…éšœå¤„ç†æµç¨‹**: æ ‡å‡†åŒ–æ•…éšœå¤„ç†æµç¨‹
- **åº”æ€¥é¢„æ¡ˆ**: å„ç±»æ•…éšœåœºæ™¯åº”æ€¥é¢„æ¡ˆ
- **è”ç³»æœºåˆ¶**: 7x24å°æ—¶åº”æ€¥è”ç³»æœºåˆ¶
- **æ¢å¤éªŒè¯**: æ•…éšœæ¢å¤åçš„éªŒè¯æµç¨‹

### 8.3 æŒç»­æ”¹è¿›
- **ç”¨æˆ·åé¦ˆæ”¶é›†**: å®šæœŸæ”¶é›†ç”¨æˆ·åé¦ˆ
- **ç³»ç»Ÿä¼˜åŒ–**: åŸºäºç›‘æ§æ•°æ®çš„æŒç»­ä¼˜åŒ–
- **åŠŸèƒ½è¿­ä»£**: åŸºäºä¸šåŠ¡éœ€æ±‚çš„åŠŸèƒ½è¿­ä»£
- **æŠ€æœ¯å‡çº§**: å®šæœŸæŠ€æœ¯æ ˆå‡çº§å’Œå®‰å…¨æ›´æ–°

---

## é™„å½•

### A. æœ¯è¯­å®šä¹‰
- **ä¸¾æŠ¥**: ç”¨æˆ·å¯¹è¿è§„å†…å®¹çš„æŠ•è¯‰è¡Œä¸º
- **å®¡æ ¸**: ç®¡ç†å‘˜å¯¹ä¸¾æŠ¥å†…å®¹çš„å¤„ç†è¿‡ç¨‹
- **è„±æ•**: å¯¹æ•æ„Ÿä¿¡æ¯è¿›è¡ŒåŒ¿ååŒ–å¤„ç†
- **é£é™©è¯„ä¼°**: åŸºäºç®—æ³•çš„å†…å®¹é£é™©ç­‰çº§åˆ¤å®š

### B. å‚è€ƒæ–‡æ¡£
- [OpenPenPal è¯„è®ºç³»ç»Ÿ FSD](comment-system-fsd.md)
- [OpenPenPal ç”¨æˆ·ç³»ç»Ÿ FSD](user-system-fsd.md)
- [OpenPenPal é€šçŸ¥ç³»ç»Ÿ FSD](notification-system-fsd.md)
- [OpenPenPal å†…å®¹å®¡æ ¸ç³»ç»Ÿ FSD](moderation-system-fsd.md)

### C. å˜æ›´å†å²
| ç‰ˆæœ¬ | æ—¥æœŸ | å˜æ›´å†…å®¹ | ä½œè€… |
|------|------|----------|------|
| 1.0 | 2025-08-15 | åˆå§‹ç‰ˆæœ¬ï¼Œå®Œæ•´çš„ä¸¾æŠ¥ç³»ç»ŸåŠŸèƒ½è§„æ ¼ | AI Assistant |

---

**æ–‡æ¡£çŠ¶æ€**: âœ… å·²å®Œæˆ  
**æœ€åæ›´æ–°**: 2025-08-15  
**ä¸‹æ¬¡è¯„å®¡**: 2025-09-15