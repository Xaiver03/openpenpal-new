# 积分激励系统功能规格说明书 (FSD)

> **实现状态**: ✅ 已实现 v1.0
> **更新时间**: 2024-01-21
> **相关文档**: 
> - [实现状态报告](../../implementation/credit-system-implementation-status.md)
> - [开发者指南](../../implementation/credit-system-developer-guide.md)

## **一、模块定位**

积分系统用于为平台内各种参与行为赋予可量化的价值，支持：

- 📬 写信、回信、公开投稿等获得积分
    
- 🧳 信使完成任务获取积分（用于成长与换礼）
    
- 🎨 投稿信封设计、被采纳获得积分与现金激励
    
- 🧠 AI互动、写作广场活跃、策展信件等行为积累社区声誉
    
- 🏅 积分可用于兑换徽章、周边、抽奖机会或权限开通
    

---

## **二、积分行为明细（积分获取表）**

| **行为**        | **积分** | **限制条件**      |
| ------------- | ------ | ------------- |
| 成功写信并绑定条码     | +10    | 每日上限3封        |
| 被回信（实名/匿名）    | +5     | 每日上限5封        |
| 公开信被点赞        | +1     | 每封信上限+20      |
| 参与写作挑战（并完成投稿） | +15    | 每周限一次         |
| 使用AI笔友并留下评价   | +3     | 每次限一次         |
| 成为信使后首次完成任务   | +20    | 新手奖励          |
| 信使每成功送达一封信    | +5     | 无上限           |
| 审核通过投稿信封被采纳   | +100   | 可额外获得200元稿费现金 |
| 点位申请审核成功      | +10    | 每人限1次         |
| 被授予社区贡献徽章     | +50    | 后台或管理员可手动奖励   |

---

## **三、积分使用方向**

| **用途**         | **所需积分** | **说明**                  |
| -------------- | -------- | ----------------------- |
| 兑换OpenPenPal周边 | 200–500  | 如定制信纸、徽章、帆布包等           |
| 参与抽奖活动         | 50/次     | 可抽盲盒信封、限定信纸等            |
| 开启“AI漂流信”功能    | 300      | 解锁定向投递至匿名匹配用户的 AI 功能    |
| 开启漂流主题馆投稿      | 150      | 投递可参与官方主题展示（需内容审核）      |
| 升级信使等级         | 自动       | 根据任务积分累计，提升等级，获取更多权限或头衔 |

---

## **四、积分数据结构设计**

```
UserCredit {
  user_id: string;
  total_points: number;
  current_balance: number;
  credit_history: CreditRecord[];
}

CreditRecord {
  id: string;
  type: "write" | "reply" | "ai" | "messenger" | "design" | "admin_reward";
  value: number;
  description: string;
  created_at: datetime;
}
```

---

## **五、积分排行榜（社区感设计）**

- 📊 周排行榜：每周积分增量前10名展示（校园/全站）
    
- 🏆 总排行榜：展示“社区长期贡献者”
    
- 🎖️ 信使专属榜单：展示不同片区派送量Top用户
    
- 🥇 专属标签：如「笔力惊人」「AI信友先锋」「投递之王」
    

---

## **六、权限与角色影响（积分与身份绑定）**

|**阶段**|**积分要求**|**解锁内容**|
|---|---|---|
|新手写手|0|写匿名信、定向信、公开信|
|热门写手|200|信件推荐权、展示封面解锁|
|漂流策展人|500|投稿漂流馆主题信、官方认证信作者标识|
|高级信使|累计800|管理3个点位权限、特殊徽章|
|城市传递员（勋章）|1200|官方周边兑换、线下活动优先名额|

---

## **七、激励兑换中心建议界面**

- 积分商城（按积分段分类）
    
- 每日推荐（“今日抽奖开放”“兑换限时徽章”）
    
- 可视化进度条（如离“高级信使”还差X分）
    
- 我的兑换记录 + 所得徽章
    

---

## **八、接口设计示例**

  

### **8.1 查询用户积分**

  

GET /api/credits/me

```
{
  "total_points": 740,
  "current_balance": 540,
  "history": [...]
}
```

### **8.2 兑换请求**

  

POST /api/credits/redeem

```
{
  "reward_id": "badge_writer_01"
}
```

---

## **九、安全与风控策略**

|**风险点**|**控制机制**|
|---|---|
|刷积分行为|限制每日积分来源总量 + 异常模式监控|
|信使作弊刷单|所有派送积分仅对任务状态完整 +扫码确认记录有效|
|AI评价刷赞|每人每日AI互动限次，强绑定用户ID与设备信息|
|信封投稿刷号|每次投稿需图像识别/内容审核，避免刷积分或灌水设计|

---

## **十、实现状态说明**

### 10.1 当前版本 (v1.0) 已实现 ✅

1. **核心功能**
   - ✅ 所有积分获取机制（写信、回信、点赞、AI互动、信使任务等）
   - ✅ 模块化积分任务系统（异步处理、重试机制）
   - ✅ 用户积分等级系统（10级进阶）
   - ✅ 积分历史记录和追踪

2. **前端实现**
   - ✅ 用户积分中心（查看积分、历史、任务）
   - ✅ 信使专属积分管理（团队积分、排行榜）
   - ✅ 管理员积分后台（规则配置、手动调整、数据分析）
   - ✅ 实时积分变动通知

3. **系统集成**
   - ✅ 四级信使管理系统集成
   - ✅ 平台管理员界面集成
   - ✅ 各业务模块积分触发集成

### 10.2 待实现功能 🚧

1. **积分使用功能**
   - 🚧 积分商城系统
   - 🚧 周边兑换功能
   - 🚧 抽奖系统
   - 🚧 AI漂流信解锁
   - 🚧 主题馆投稿权限

2. **限制与控制**
   - 🚧 每日/每周上限控制
   - 🚧 单信点赞上限
   - 🚧 防作弊算法优化

3. **高级功能**
   - 🚧 积分有效期机制
   - 🚧 积分转赠功能
   - 🚧 团队积分池
   - 🚧 限时活动系统

### 10.3 技术实现要点

- **后端架构**: Go + Gin + GORM + PostgreSQL
- **前端技术**: React + Next.js + TypeScript + Zustand
- **任务队列**: 基于数据库的异步任务处理
- **实时通信**: WebSocket积分变动推送
- **安全机制**: Reference字段防重、审计日志、权限控制

### 10.4 开发资源

- 📖 [实现状态详细报告](../../implementation/credit-system-implementation-status.md)
- 🛠️ [开发者集成指南](../../implementation/credit-system-developer-guide.md)
- 🔍 相关代码位置：
  - 后端服务: `backend/internal/services/credit_*.go`
  - 前端组件: `frontend/src/components/credit/`
  - API定义: `backend/internal/handlers/credit_handler.go`
  - 数据模型: `backend/internal/models/credit_*.go`
