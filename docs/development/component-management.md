# OpenPenPal ç»„ä»¶ç®¡ç†æ–‡æ¡£

> ä¾›æ‰€æœ‰ Agent ç»Ÿä¸€æŸ¥çœ‹å’Œä½¿ç”¨çš„ç»„ä»¶åº“æ–‡æ¡£

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£æä¾› OpenPenPal å‰ç«¯é¡¹ç›®çš„å®Œæ•´ç»„ä»¶æ¸…å•ã€ä½¿ç”¨æ–¹æ³•å’Œé›†æˆæŒ‡å—ï¼Œç¡®ä¿æ‰€æœ‰ Agent èƒ½å¤Ÿç»Ÿä¸€ç†è§£å’Œä½¿ç”¨ç°æœ‰ç»„ä»¶ã€‚

## ğŸ—‚ï¸ ç»„ä»¶åˆ†ç±»

### 1. UI åŸºç¡€ç»„ä»¶ (`@/components/ui/`)

#### Button æŒ‰é’®ç»„ä»¶
- **è·¯å¾„**: `src/components/ui/button.tsx`
- **ç”¨é€”**: ç»Ÿä¸€çš„æŒ‰é’®æ ·å¼ï¼Œæ”¯æŒå¤šç§å˜ä½“
- **å˜ä½“**: `default`, `destructive`, `outline`, `secondary`, `ghost`, `link`
- **å¤§å°**: `default`, `sm`, `lg`, `icon`
- **ä½¿ç”¨ç¤ºä¾‹**:
```typescript
import { Button } from '@/components/ui/button'
<Button variant="outline" size="lg">æŒ‰é’®æ–‡å­—</Button>
```

#### Card å¡ç‰‡ç»„ä»¶
- **è·¯å¾„**: `src/components/ui/card.tsx`
- **ç»„ä»¶**: `Card`, `CardHeader`, `CardTitle`, `CardDescription`, `CardContent`, `CardFooter`
- **ç”¨é€”**: å†…å®¹å®¹å™¨ï¼Œé€‚ç”¨äºä¿¡ä»¶å±•ç¤ºã€è¡¨å•ç­‰
- **ä½¿ç”¨ç¤ºä¾‹**:
```typescript
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'
<Card>
  <CardHeader>
    <CardTitle>æ ‡é¢˜</CardTitle>
  </CardHeader>
  <CardContent>å†…å®¹</CardContent>
</Card>
```

#### Input è¾“å…¥æ¡†ç»„ä»¶
- **è·¯å¾„**: `src/components/ui/input.tsx`
- **ç”¨é€”**: è¡¨å•è¾“å…¥ï¼Œæ”¯æŒå„ç§ç±»å‹
- **ç‰¹æ€§**: è‡ªåŠ¨èšç„¦ã€éªŒè¯çŠ¶æ€ã€ç¦ç”¨çŠ¶æ€
- **ä½¿ç”¨ç¤ºä¾‹**:
```typescript
import { Input } from '@/components/ui/input'
<Input placeholder="è¯·è¾“å…¥..." value={value} onChange={handleChange} />
```

#### Badge å¾½ç« ç»„ä»¶
- **è·¯å¾„**: `src/components/ui/badge.tsx`
- **å˜ä½“**: `default`, `secondary`, `destructive`, `outline`
- **ç”¨é€”**: çŠ¶æ€æ ‡è¯†ã€æ ‡ç­¾å±•ç¤º
- **ä½¿ç”¨ç¤ºä¾‹**:
```typescript
import { Badge } from '@/components/ui/badge'
<Badge variant="outline">çŠ¶æ€æ ‡ç­¾</Badge>
```

#### Alert è­¦å‘Šç»„ä»¶
- **è·¯å¾„**: `src/components/ui/alert.tsx`
- **ç»„ä»¶**: `Alert`, `AlertDescription`, `AlertTitle`
- **å˜ä½“**: `default`, `destructive`
- **ç”¨é€”**: é‡è¦ä¿¡æ¯æç¤ºã€é”™è¯¯æç¤º
- **ä½¿ç”¨ç¤ºä¾‹**:
```typescript
import { Alert, AlertDescription } from '@/components/ui/alert'
<Alert variant="destructive">
  <AlertDescription>é”™è¯¯ä¿¡æ¯</AlertDescription>
</Alert>
```

### 2. å¸ƒå±€ç»„ä»¶ (`@/components/layout/`)

#### Header å¤´éƒ¨å¯¼èˆª
- **è·¯å¾„**: `src/components/layout/header.tsx`
- **åŠŸèƒ½**: ä¸»å¯¼èˆªã€ç”¨æˆ·èœå•ã€å“åº”å¼è®¾è®¡
- **å¯¼èˆªé¡¹**: å†™ä¿¡å»(`/write`)ã€å†™ä½œå¹¿åœº(`/plaza`)ã€ä¿¡ä»¶åšç‰©é¦†(`/museum`)ã€ä¿¡å°å•†åŸ(`/shop`)
- **é›†æˆ**: è‡ªåŠ¨æ£€æµ‹ç™»å½•çŠ¶æ€ã€è·¯ç”±é«˜äº®

#### Footer é¡µè„š
- **è·¯å¾„**: `src/components/layout/footer.tsx`
- **å†…å®¹**: ç‰ˆæƒä¿¡æ¯ã€é“¾æ¥ã€è”ç³»æ–¹å¼
- **æ ·å¼**: ç®€æ´è®¾è®¡ï¼Œä¸æ•´ä½“é£æ ¼ç»Ÿä¸€

### 3. åŠŸèƒ½ç»„ä»¶

#### PerformanceWrapper æ€§èƒ½ç›‘æ§
- **è·¯å¾„**: `src/components/optimization/performance-wrapper.tsx`
- **åŠŸèƒ½**: Core Web Vitals ç›‘æ§ã€æ€§èƒ½æŒ‡æ ‡æ”¶é›†
- **ç›‘æ§æŒ‡æ ‡**: LCP, FID, CLS, TTFB
- **ä½¿ç”¨**: åŒ…è£…éœ€è¦ç›‘æ§çš„é¡µé¢ç»„ä»¶
- **é…ç½®**: æ”¯æŒé‡‡æ ·ç‡é…ç½®ã€è°ƒè¯•æ¨¡å¼

#### CommunityStats ç¤¾åŒºç»Ÿè®¡
- **è·¯å¾„**: `src/components/community/stats.tsx`
- **åŠŸèƒ½**: ç”¨æˆ·æ´»è·ƒåº¦ã€ä¿¡ä»¶ç»Ÿè®¡å±•ç¤º
- **ç‰¹æ€§**: æ‡’åŠ è½½ã€åŠ¨ç”»æ•ˆæœ
- **æ•°æ®æº**: ä»ç¤¾åŒº API è·å–å®æ—¶æ•°æ®

### 4. é¡µé¢ç»„ä»¶ (`@/app/`)

#### ä¸»è¦é¡µé¢ç»„ä»¶

**å†™ä¿¡é¡µé¢** (`src/app/(main)/write/page.tsx`)
- **åŠŸèƒ½**: ä¿¡ä»¶æ’°å†™ã€æ ·å¼é€‰æ‹©ã€è‰ç¨¿ä¿å­˜ã€ç¼–å·ç”Ÿæˆ
- **ç‰¹æ€§**: æ”¯æŒå›ä¿¡æ¨¡å¼ã€URL å‚æ•°è§£æ
- **é›†æˆ**: ä¸ Zustand store é›†æˆã€API è°ƒç”¨

**é˜…è¯»é¡µé¢** (`src/app/(main)/read/[code]/page.tsx`)
- **åŠŸèƒ½**: ä¿¡ä»¶å±•ç¤ºã€çŠ¶æ€ç®¡ç†ã€äº’åŠ¨æ“ä½œ
- **ç‰¹æ€§**: åŠ¨æ€è·¯ç”±ã€å›ä¿¡è·³è½¬ã€åˆ†äº«åŠŸèƒ½
- **æ“ä½œ**: æ ‡è®°å·²è¯»ã€å›ä¿¡ã€åˆ†äº«ã€æ”¶è—

**å†™ä½œå¹¿åœº** (`src/app/plaza/page.tsx`)
- **åŠŸèƒ½**: ç¤¾åŒºå†…å®¹å±•ç¤ºã€åˆ†ç±»æµè§ˆ
- **ç‰¹æ€§**: æ‡’åŠ è½½ç»Ÿè®¡ç»„ä»¶ã€å“åº”å¼å¸ƒå±€
- **å†…å®¹**: ç²¾é€‰æ–‡ç« ã€åˆ†ç±»å¯¼èˆªã€æ’åºåŠŸèƒ½

**ä¿¡ä»¶åšç‰©é¦†** (`src/app/museum/page.tsx`)
- **åŠŸèƒ½**: å†å²ä¿¡ä»¶å±•è§ˆã€æ–‡åŒ–å±•ç¤º
- **ç‰¹æ€§**: æ—¶é—´è½´æµè§ˆã€ä¸»é¢˜åˆ†ç±»
- **å†…å®¹**: ç²¾é€‰å†å²ä¿¡ä»¶ã€æ–‡åŒ–æ•…äº‹

**ä¿¡å°å•†åŸ** (`src/app/shop/page.tsx`)
- **åŠŸèƒ½**: ä¿¡å°æ ·å¼é€‰æ‹©ã€ä¸ªæ€§åŒ–å®šåˆ¶
- **ç‰¹æ€§**: å•†å“å±•ç¤ºã€è´­ç‰©è½¦åŠŸèƒ½
- **å†…å®¹**: ä¿¡å°æ ·å¼ã€è£…é¥°å…ƒç´ ã€å®šåˆ¶é€‰é¡¹

## ğŸ¨ æ ·å¼ç³»ç»Ÿ

### Tailwind CSS é…ç½®
- **é…ç½®æ–‡ä»¶**: `tailwind.config.js`
- **ä¸»é¢˜è‰²å½©**: OpenPenPal çº¸è´¨é£æ ¼è‰²å½©ç³»ç»Ÿ
- **æ ¸å¿ƒé¢œè‰²**:
  - `letter-paper`: #fefcf7 (çº¸é»„è‰²èƒŒæ™¯)
  - `letter-amber`: #f59e0b (ç¥ç€è‰²ä¸»è‰²è°ƒ)
  - `letter-ink`: #7c2d12 (æ·±æ£•è‰²æ–‡å­—)
- **å­—ä½“**: Noto Serif SC (ä¸­æ–‡è¡¬çº¿)ã€Inter (è‹±æ–‡æ— è¡¬çº¿)

### CSS ç±»å‘½åè§„èŒƒ
- **BEM é£æ ¼**: `.component__element--modifier`
- **è¯­ä¹‰åŒ–å‘½å**: ä¼˜å…ˆä½¿ç”¨åŠŸèƒ½æ€§å‘½å
- **å“åº”å¼**: ä½¿ç”¨ Tailwind å“åº”å¼å‰ç¼€ (`sm:`, `md:`, `lg:`, `xl:`)

## ğŸ“¦ çŠ¶æ€ç®¡ç†

### Zustand Store
- **è·¯å¾„**: `src/stores/`
- **Letter Store** (`letter-store.ts`):
  - è‰ç¨¿ç®¡ç†ã€ä¿¡ä»¶çŠ¶æ€ã€ç”¨æˆ·æ“ä½œå†å²
  - æ–¹æ³•: `createDraft()`, `saveDraft()`, `deleteDraft()`

### æœ¬åœ°å­˜å‚¨ç­–ç•¥
- **è‰ç¨¿è‡ªåŠ¨ä¿å­˜**: é˜²æ­¢æ•°æ®ä¸¢å¤±
- **ç”¨æˆ·åå¥½**: ç•Œé¢è®¾ç½®ã€ä¸»é¢˜é€‰æ‹©
- **ç¼“å­˜ç­–ç•¥**: API å“åº”ç¼“å­˜ã€å›¾ç‰‡ç¼“å­˜

## ğŸ”§ å·¥å…·å‡½æ•°

### å®ç”¨å·¥å…· (`@/lib/`)

#### utils.ts
- `cn()`: className åˆå¹¶å‡½æ•°
- `formatRelativeTime()`: ç›¸å¯¹æ—¶é—´æ ¼å¼åŒ–
- `generateId()`: å”¯ä¸€IDç”Ÿæˆ

#### api.ts
- `createLetterDraft()`: åˆ›å»ºä¿¡ä»¶è‰ç¨¿
- `generateLetterCode()`: ç”Ÿæˆä¿¡ä»¶ç¼–å·
- `fetchLetter()`: è·å–ä¿¡ä»¶æ•°æ®

#### lazy-imports.ts
- é›†ä¸­ç®¡ç†æ‡’åŠ è½½ç»„ä»¶
- æ€§èƒ½ä¼˜åŒ–é…ç½®
- åŠ è½½çŠ¶æ€ç»„ä»¶

## ğŸš€ æ€§èƒ½ä¼˜åŒ–

### ä»£ç åˆ†å‰²ç­–ç•¥
- **è·¯ç”±çº§åˆ†å‰²**: æ¯ä¸ªé¡µé¢ç‹¬ç«‹æ‰“åŒ…
- **ç»„ä»¶çº§åˆ†å‰²**: å¤§å‹ç»„ä»¶æ‡’åŠ è½½
- **ç¬¬ä¸‰æ–¹åº“**: ç‹¬ç«‹æ‰“åŒ…ï¼Œå‡å°‘ä¸»åŒ…ä½“ç§¯

### æ‡’åŠ è½½é…ç½®
- **å›¾ç‰‡æ‡’åŠ è½½**: è‡ªåŠ¨æ£€æµ‹viewport
- **ç»„ä»¶æ‡’åŠ è½½**: `dynamic()` åŒ…è£…
- **åŠ è½½çŠ¶æ€**: ç»Ÿä¸€çš„ loading ç»„ä»¶

### æ„å»ºä¼˜åŒ–
- **Bundle åˆ†æ**: `npm run analyze`
- **Tree Shaking**: è‡ªåŠ¨ç§»é™¤æœªä½¿ç”¨ä»£ç 
- **å‹ç¼©ä¼˜åŒ–**: ç”Ÿäº§ç¯å¢ƒè‡ªåŠ¨å‹ç¼©

## ğŸ“± å“åº”å¼è®¾è®¡

### æ–­ç‚¹ç³»ç»Ÿ
- **Mobile**: < 640px
- **Tablet**: 640px - 1024px
- **Desktop**: > 1024px
- **Large**: > 1400px

### ç»„ä»¶é€‚é…åŸåˆ™
- **ç§»åŠ¨ä¼˜å…ˆ**: é»˜è®¤ç§»åŠ¨ç«¯è®¾è®¡
- **æ¸è¿›å¢å¼º**: å¤§å±å¹•æ·»åŠ åŠŸèƒ½
- **è§¦æ‘¸å‹å¥½**: è¶³å¤Ÿçš„ç‚¹å‡»åŒºåŸŸ

## ğŸ§ª æµ‹è¯•ç­–ç•¥

### å•å…ƒæµ‹è¯•
- **ç»„ä»¶æµ‹è¯•**: React Testing Library
- **å·¥å…·å‡½æ•°æµ‹è¯•**: Jest
- **è¦†ç›–ç‡è¦æ±‚**: > 80%

### é›†æˆæµ‹è¯•
- **é¡µé¢æµç¨‹**: ç”¨æˆ·æ“ä½œè·¯å¾„
- **API é›†æˆ**: æ¨¡æ‹ŸæœåŠ¡å™¨å“åº”
- **è·¨æµè§ˆå™¨**: ä¸»æµæµè§ˆå™¨å…¼å®¹æ€§

## ğŸ“š å¼€å‘è§„èŒƒ

### ä»£ç è§„èŒƒ
1. **ç»„ä»¶å‘½å**: PascalCaseï¼ŒåŠŸèƒ½æ€§å‘½å
2. **æ–‡ä»¶ç»„ç»‡**: æŒ‰åŠŸèƒ½åˆ†ç»„ï¼Œæ¸…æ™°çš„ç›®å½•ç»“æ„
3. **Props ç±»å‹**: å¼ºç±»å‹ TypeScript å®šä¹‰
4. **é”™è¯¯å¤„ç†**: ç»Ÿä¸€çš„é”™è¯¯è¾¹ç•Œç»„ä»¶

### æäº¤è§„èŒƒ
1. **ç±»å‹å‰ç¼€**: feat/fix/docs/style/refactor/test
2. **ç®€æ´æè¿°**: ä¸€å¥è¯è¯´æ˜ä¿®æ”¹å†…å®¹
3. **å…³è”issue**: å¼•ç”¨ç›¸å…³é—®é¢˜ç¼–å·

### ä»£ç å®¡æŸ¥
1. **åŠŸèƒ½å®Œæ•´æ€§**: ç¡®ä¿åŠŸèƒ½æ­£å¸¸å·¥ä½œ
2. **ä»£ç è´¨é‡**: éµå¾ªé¡¹ç›®è§„èŒƒ
3. **æ€§èƒ½è€ƒè™‘**: é¿å…æ€§èƒ½é—®é¢˜
4. **å®‰å…¨æ£€æŸ¥**: é˜²æ­¢å®‰å…¨æ¼æ´

## ğŸ”„ ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ

### å¼€å‘æµç¨‹
1. **éœ€æ±‚åˆ†æ**: æ˜ç¡®ç»„ä»¶åŠŸèƒ½å’Œæ¥å£
2. **è®¾è®¡å®¡æŸ¥**: UI/UX è®¾è®¡ç¡®è®¤
3. **å¼€å‘å®ç°**: ç¼–ç å’Œè‡ªæµ‹
4. **ä»£ç å®¡æŸ¥**: å›¢é˜Ÿå®¡æŸ¥
5. **æµ‹è¯•éªŒè¯**: å•å…ƒå’Œé›†æˆæµ‹è¯•
6. **æ–‡æ¡£æ›´æ–°**: æ›´æ–°æœ¬æ–‡æ¡£

### ç»´æŠ¤æµç¨‹
1. **é—®é¢˜æŠ¥å‘Š**: Issue è·Ÿè¸ª
2. **å½±å“è¯„ä¼°**: ç¡®å®šä¿®æ”¹èŒƒå›´
3. **å‘åå…¼å®¹**: ä¿æŒ API ç¨³å®š
4. **ç‰ˆæœ¬ç®¡ç†**: è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶

## ğŸ“– ä½¿ç”¨æŒ‡å—

### å¿«é€Ÿå¼€å§‹
1. **ç¯å¢ƒè®¾ç½®**: `npm install`
2. **å¼€å‘æœåŠ¡**: `npm run dev`
3. **ç±»å‹æ£€æŸ¥**: `npm run type-check`
4. **ä»£ç æ£€æŸ¥**: `npm run lint`

### å¸¸ç”¨å‘½ä»¤
```bash
# å¼€å‘ç¯å¢ƒ
npm run dev                 # å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run type-check         # TypeScript ç±»å‹æ£€æŸ¥
npm run lint               # ESLint ä»£ç æ£€æŸ¥
npm run lint:fix           # è‡ªåŠ¨ä¿®å¤ä»£ç é£æ ¼é—®é¢˜

# æ„å»ºå’Œåˆ†æ
npm run build              # ç”Ÿäº§æ„å»º
npm run build:analyze      # æ„å»ºå¹¶åˆ†æåŒ…å¤§å°
npm run analyze            # æŸ¥çœ‹æ„å»ºåˆ†ææŠ¥å‘Š

# å®ç”¨å·¥å…·
npm run clean              # æ¸…ç†ä¾èµ–å’Œæ„å»ºæ–‡ä»¶
npm run health-check       # ç³»ç»Ÿå¥åº·æ£€æŸ¥
```

### è°ƒè¯•æŠ€å·§
1. **React DevTools**: ç»„ä»¶çŠ¶æ€è°ƒè¯•
2. **Performance Tab**: æ€§èƒ½é—®é¢˜å®šä½
3. **Network Tab**: API è¯·æ±‚è°ƒè¯•
4. **Console**: é”™è¯¯æ—¥å¿—åˆ†æ

## ğŸ”— å¤–éƒ¨ä¾èµ–

### æ ¸å¿ƒä¾èµ–
- **React 18**: å‰ç«¯æ¡†æ¶
- **Next.js 14**: å…¨æ ˆæ¡†æ¶
- **TypeScript**: ç±»å‹å®‰å…¨
- **Tailwind CSS**: æ ·å¼æ¡†æ¶

### UI ç»„ä»¶åº“
- **Radix UI**: æ— æ ·å¼ç»„ä»¶åŸºç¡€
- **Lucide React**: å›¾æ ‡åº“
- **Framer Motion**: åŠ¨ç”»åº“

### çŠ¶æ€ç®¡ç†
- **Zustand**: è½»é‡çº§çŠ¶æ€ç®¡ç†
- **React Error Boundary**: é”™è¯¯å¤„ç†

### å¼€å‘å·¥å…·
- **ESLint**: ä»£ç è´¨é‡
- **Webpack Bundle Analyzer**: æ‰“åŒ…åˆ†æ

## ğŸ¯ æœ€ä½³å®è·µ

### ç»„ä»¶è®¾è®¡
1. **å•ä¸€èŒè´£**: æ¯ä¸ªç»„ä»¶åªè´Ÿè´£ä¸€ä¸ªåŠŸèƒ½
2. **Props æœ€å°åŒ–**: åªæš´éœ²å¿…è¦çš„é…ç½®é¡¹
3. **é»˜è®¤å€¼**: æä¾›åˆç†çš„é»˜è®¤é…ç½®
4. **é”™è¯¯å¤„ç†**: ä¼˜é›…å¤„ç†å¼‚å¸¸æƒ…å†µ

### æ€§èƒ½ä¼˜åŒ–
1. **æ‡’åŠ è½½**: éå…³é”®ç»„ä»¶æ‡’åŠ è½½
2. **å†…å­˜ç®¡ç†**: åŠæ—¶æ¸…ç†äº‹ä»¶ç›‘å¬å™¨
3. **æ¸²æŸ“ä¼˜åŒ–**: ä½¿ç”¨ React.memo é˜²æ­¢ä¸å¿…è¦é‡æ¸²æŸ“
4. **åŒ…å¤§å°**: æ§åˆ¶ç¬¬ä¸‰æ–¹åº“ä½¿ç”¨

### ç”¨æˆ·ä½“éªŒ
1. **åŠ è½½çŠ¶æ€**: æä¾›æ¸…æ™°çš„åŠ è½½åé¦ˆ
2. **é”™è¯¯æç¤º**: å‹å¥½çš„é”™è¯¯ä¿¡æ¯
3. **å“åº”å¼**: é€‚é…å„ç§è®¾å¤‡
4. **æ— éšœç¢**: æ”¯æŒé”®ç›˜å¯¼èˆªå’Œå±å¹•é˜…è¯»å™¨

---

## ğŸ“ è”ç³»å’Œæ”¯æŒ

**ç»´æŠ¤å›¢é˜Ÿ**: Frontend Agent
**æ›´æ–°é¢‘ç‡**: éšé¡¹ç›®è¿›åº¦å®æ—¶æ›´æ–°
**é—®é¢˜åé¦ˆ**: é€šè¿‡é¡¹ç›® Issue ç³»ç»Ÿ

> æœ¬æ–‡æ¡£ä¼šéšç€é¡¹ç›®å‘å±•æŒç»­æ›´æ–°ï¼Œè¯·å®šæœŸæŸ¥çœ‹æœ€æ–°ç‰ˆæœ¬ã€‚