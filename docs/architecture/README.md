# 系统架构文档

本目录包含OpenPenPal项目的系统架构设计和技术规范。

## 🏛️ 架构概览

### 核心文档
- [agent-1-responsibilities.md](./agent-1-responsibilities.md) - Agent系统职责分工
- [shared-context.md](./shared-context.md) - 系统共享上下文设计

## 🔧 系统架构

### 微服务架构
OpenPenPal采用微服务架构，包含以下主要服务：

#### 前端服务
- **Web前端**: Next.js 14 应用，提供用户界面
- **移动端**: 响应式设计，支持移动设备访问

#### 后端服务
- **写信服务** (Go): 处理信件创建、编辑和管理
- **信使服务** (Python): 管理信使系统和配送功能
- **管理服务** (Java): 用户管理和权限控制
- **OCR服务** (Python): 图像识别和文字提取

#### 数据层
- **PostgreSQL**: 主数据库，存储用户、信件、订单等数据
- **Redis**: 缓存层，提升系统性能
- **文件存储**: 图片和文件的存储管理

### Agent协作架构
- **多Agent系统**: 支持多个AI Agent协同工作
- **上下文共享**: 统一的上下文管理机制
- **任务分配**: 智能的任务分配和执行

## 🔐 安全架构

### 身份认证
- JWT Token认证
- 基于角色的权限控制(RBAC)
- API访问控制

### 数据安全
- 数据加密传输
- 敏感信息加密存储
- 访问日志记录

## 📊 性能设计

### 缓存策略
- Redis缓存热点数据
- CDN加速静态资源
- 数据库查询优化

### 负载均衡
- 服务实例负载均衡
- 数据库读写分离
- 异步任务处理

## 🔗 相关文档

- [API文档](../api/) - 服务接口规范
- [开发文档](../development/) - 开发指南
- [部署文档](../deployment/) - 部署架构

---

**最后更新**: 2025-01-23  
**维护**: OpenPenPal架构团队