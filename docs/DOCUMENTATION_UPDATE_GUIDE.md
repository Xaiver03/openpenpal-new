# OpenPenPal 文档更新指南

**版本**: v1.0  
**更新日期**: 2025-01-23  
**负责人**: OpenPenPal团队

## 📋 文档更新原则

### 核心原则
1. **代码优先**: 代码变更后立即更新相关文档
2. **准确性**: 文档必须准确反映当前系统状态
3. **一致性**: 遵循统一的格式和命名规范
4. **可追溯**: 重要更新记录在变更日志中

## 🔄 文档更新流程

### 1. 触发文档更新的场景
- [ ] API接口变更
- [ ] 新功能添加
- [ ] 架构调整
- [ ] 配置变更
- [ ] 依赖更新
- [ ] Bug修复（影响使用方式）

### 2. 更新步骤

#### Step 1: 识别受影响的文档
```bash
# 根据变更类型确定需要更新的文档
# API变更 -> docs/api/
# 架构变更 -> docs/architecture/
# 功能变更 -> docs/guides/ 或 相关服务文档
# 配置变更 -> 相关配置文档
```

#### Step 2: 更新文档内容
- 保持文档格式一致
- 更新版本号和日期
- 添加变更说明
- 更新示例代码

#### Step 3: 验证文档准确性
- [ ] 代码示例可执行
- [ ] 链接有效
- [ ] 配置正确
- [ ] 截图最新（如有）

#### Step 4: 提交和审查
```bash
# 提交文档更新
git add docs/
git commit -m "docs: update [文档名称] for [变更原因]"

# 创建 Pull Request
# 标题: docs: [更新内容简述]
# 描述: 详细说明更新原因和内容
```

## 📝 文档模板

### API文档模板
```markdown
## 接口名称

**路径**: `/api/v1/endpoint`  
**方法**: `POST`  
**认证**: 需要Bearer Token

### 请求参数
| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| param1 | string | 是 | 参数说明 |

### 请求示例
​```json
{
  "param1": "value"
}
​```

### 响应示例
​```json
{
  "success": true,
  "data": {}
}
​```

### 错误码
| 错误码 | 说明 |
|--------|------|
| 400 | 参数错误 |
| 401 | 未授权 |
```

### 功能文档模板
```markdown
# 功能名称

**版本**: v1.0  
**更新日期**: 2025-01-23  
**负责人**: [姓名]

## 功能概述
简要描述功能的作用和价值

## 使用方法
1. 步骤一
2. 步骤二
3. 步骤三

## 配置选项
| 配置项 | 默认值 | 说明 |
|--------|--------|------|
| option1 | value | 说明 |

## 注意事项
- 注意点1
- 注意点2

## 相关文档
- [链接1](./link1.md)
- [链接2](./link2.md)
```

## 🔍 文档检查清单

### 每周检查
- [ ] 检查失效链接
- [ ] 更新过期信息
- [ ] 同步代码变更

### 每月检查
- [ ] 全面审查文档准确性
- [ ] 收集用户反馈
- [ ] 优化文档结构

### 每季度检查
- [ ] 重新评估文档架构
- [ ] 更新文档标准
- [ ] 清理过期文档

## 🛠️ 文档维护工具

### 链接检查脚本
```bash
#!/bin/bash
# check-doc-links.sh
# 检查文档中的链接有效性

find docs -name "*.md" -type f | while read file; do
    echo "检查文件: $file"
    grep -oE '\[([^]]+)\]\(([^)]+)\)' "$file" | while read link; do
        # 提取链接目标
        target=$(echo "$link" | sed -E 's/.*\(([^)]+)\).*/\1/')
        # 检查文件是否存在
        if [[ "$target" == http* ]]; then
            # 外部链接，跳过
            continue
        elif [[ -f "$target" ]] || [[ -d "$target" ]]; then
            echo "  ✓ $target"
        else
            echo "  ✗ $target (不存在)"
        fi
    done
done
```

### 文档更新记录
在每个文档末尾添加更新记录：
```markdown
---

## 更新记录

| 日期 | 版本 | 更新内容 | 更新人 |
|------|------|----------|--------|
| 2025-01-23 | v1.0 | 初始版本 | 张三 |
| 2025-01-24 | v1.1 | 添加新接口 | 李四 |
```

## 📊 文档质量标准

### 必须包含
- [x] 清晰的标题和描述
- [x] 准确的技术信息
- [x] 可执行的代码示例
- [x] 更新日期和版本

### 建议包含
- [ ] 图表或截图
- [ ] 常见问题解答
- [ ] 相关文档链接
- [ ] 故障排查指南

## 🎯 持续改进

### 收集反馈
- GitHub Issues
- 用户调研
- 团队内部反馈

### 迭代优化
- 根据反馈改进文档
- 简化复杂内容
- 补充缺失信息
- 优化文档结构

---

**记住**: 好的文档是项目成功的关键。保持文档更新是每个团队成员的责任！