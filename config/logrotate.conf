# OpenPenPalæ—¥å¿—è½®è½¬é…ç½® - ä¼˜åŒ–ç‰ˆæœ¬

# å…¨å±€é…ç½®
compress
delaycompress
missingok
notifempty
create 644 root root
dateext
dateformat -%Y%m%d-%s

# ğŸ”´ CRITICAL: Backendåº”ç”¨æ—¥å¿— - é˜²æ­¢æ—¥å¿—çˆ†ç‚¸
/Users/rocalight/åŒæ­¥ç©ºé—´/opplc/openpenpal/backend/*.log {
    hourly
    rotate 24
    size 50M
    maxsize 100M
    compress
    delaycompress
    copytruncate
    sharedscripts
    postrotate
        # å‘é€æ—¥å¿—è½®è½¬é€šçŸ¥
        echo "$(date): Backend logs rotated" >> /Users/rocalight/åŒæ­¥ç©ºé—´/opplc/openpenpal/logs/logrotate.log
    endscript
}

# Backendå­ç›®å½•æ—¥å¿—
/Users/rocalight/åŒæ­¥ç©ºé—´/opplc/openpenpal/backend/**/*.log {
    hourly
    rotate 12
    size 25M
    maxsize 50M
    compress
    delaycompress
    copytruncate
}

# åº”ç”¨æ—¥å¿—
/Users/rocalight/åŒæ­¥ç©ºé—´/opplc/openpenpal/logs/app/*.log {
    daily
    rotate 30
    size 100M
    postrotate
        # é‡å¯åº”ç”¨ä»¥é‡æ–°æ‰“å¼€æ—¥å¿—æ–‡ä»¶ (å¦‚æœéœ€è¦)
        # systemctl reload openpenpal || true
    endscript
}

# Frontendæ—¥å¿—
/Users/rocalight/åŒæ­¥ç©ºé—´/opplc/openpenpal/frontend/*.log {
    daily
    rotate 14
    size 100M
    compress
    delaycompress
    copytruncate
}

# è®¿é—®æ—¥å¿—
/Users/rocalight/åŒæ­¥ç©ºé—´/opplc/openpenpal/logs/access/*.log {
    daily
    rotate 90
    size 500M
    compress
    delaycompress
}

# é”™è¯¯æ—¥å¿—
/Users/rocalight/åŒæ­¥ç©ºé—´/opplc/openpenpal/logs/error/*.log {
    daily
    rotate 60
    size 50M
    compress
    delaycompress
    copytruncate
}

# æ€§èƒ½æ—¥å¿—
/Users/rocalight/åŒæ­¥ç©ºé—´/opplc/openpenpal/logs/performance/*.log {
    weekly
    rotate 12
    size 200M
    compress
    delaycompress
}

# è°ƒè¯•å’Œä¸´æ—¶æ—¥å¿— - æ›´æ¿€è¿›çš„æ¸…ç†
/Users/rocalight/åŒæ­¥ç©ºé—´/opplc/openpenpal/**/*debug*.log {
    hourly
    rotate 6
    size 10M
    maxsize 20M
    compress
    copytruncate
}

/Users/rocalight/åŒæ­¥ç©ºé—´/opplc/openpenpal/**/*temp*.log {
    hourly
    rotate 3
    size 5M
    maxsize 10M
    compress
    copytruncate
}
