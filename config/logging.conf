# OpenPenPal 统一日志配置
# 支持多种日志级别和输出格式

[loggers]
keys=root,app,access,error,performance

[handlers]
keys=console,file,rotating,error_file,access_file

[formatters]
keys=standard,detailed,json

# ================== 日志记录器 ==================

[logger_root]
level=INFO
handlers=console,file

[logger_app]
level=DEBUG
handlers=console,rotating
qualname=app
propagate=0

[logger_access]
level=INFO
handlers=access_file
qualname=access
propagate=0

[logger_error]
level=ERROR
handlers=error_file,console
qualname=error
propagate=0

[logger_performance]
level=INFO
handlers=rotating
qualname=performance
propagate=0

# ================== 处理器 ==================

[handler_console]
class=StreamHandler
level=INFO
formatter=standard
args=(sys.stdout,)

[handler_file]
class=FileHandler
level=DEBUG
formatter=detailed
args=('logs/app.log', 'a')

[handler_rotating]
class=handlers.RotatingFileHandler
level=DEBUG
formatter=json
args=('logs/app.log', 'a', 10485760, 5)

[handler_error_file]
class=FileHandler
level=ERROR
formatter=detailed
args=('logs/error.log', 'a')

[handler_access_file]
class=handlers.TimedRotatingFileHandler
level=INFO
formatter=standard
args=('logs/access.log', 'midnight', 1, 30)

# ================== 格式化器 ==================

[formatter_standard]
format=%(asctime)s [%(levelname)s] %(name)s: %(message)s
datefmt=%Y-%m-%d %H:%M:%S

[formatter_detailed]
format=%(asctime)s [%(levelname)s] %(name)s [%(filename)s:%(lineno)d] - %(message)s
datefmt=%Y-%m-%d %H:%M:%S

[formatter_json]
format={"timestamp": "%(asctime)s", "level": "%(levelname)s", "logger": "%(name)s", "file": "%(filename)s", "line": %(lineno)d, "message": "%(message)s"}
datefmt=%Y-%m-%dT%H:%M:%S